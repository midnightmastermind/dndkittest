{"ast":null,"code":"var _jsxFileName = \"/data/data/com.termux/files/home/dndkittest/src/App.js\",\n  _s = $RefreshSig$();\n// App.js â€” CLEAN ARCHITECTURE with useState containerState\nimport React, { useState, useRef, useMemo, useEffect } from \"react\";\nimport Textfield from \"@atlaskit/textfield\";\nimport Button from \"@atlaskit/button\";\nimport Grid from \"./Grid\";\nimport TaskBox from \"./TaskBox\";\nimport Schedule from \"./Schedule\";\nimport SortableItem from \"./SortableItem\";\nimport { ScheduleContext } from \"./ScheduleContext\";\nimport \"./index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction buildInstanceTree(dataArray, instanceStore) {\n  const rootIds = [];\n  for (const item of dataArray) {\n    var _item$label, _item$childrenSortabl;\n    const instId = crypto.randomUUID();\n\n    // Insert the instance (children to be filled next)\n    instanceStore[instId] = {\n      instanceId: instId,\n      taskId: crypto.randomUUID(),\n      label: (_item$label = item.label) !== null && _item$label !== void 0 ? _item$label : \"Untitled\",\n      childrenSortable: (_item$childrenSortabl = item.childrenSortable) !== null && _item$childrenSortabl !== void 0 ? _item$childrenSortabl : false,\n      children: []\n    };\n\n    // Track top-level instance\n    rootIds.push(instId);\n\n    // If children exist, recursively build\n    if (item.children && item.children.length > 0) {\n      const childIds = buildInstanceTree(item.children, instanceStore);\n      instanceStore[instId].children = childIds;\n    }\n  }\n  return rootIds;\n}\nexport default function App() {\n  _s();\n  // --------------------------------------------\n  // GRID PANELS (TaskBoxes / Schedules)\n  // --------------------------------------------\n  const [panels, setPanels] = useState([]);\n  const [rows, setRows] = useState(2);\n  const [cols, setCols] = useState(3);\n  const [showToolbar, setShowToolbar] = useState(false);\n\n  // --------------------------------------------\n  // INSTANCE STORE â€” master list of all instances\n  // --------------------------------------------\n  const instanceStoreRef = useRef({});\n\n  // --------------------------------------------\n  // CONTAINER MODEL (SHADOW LISTS) â€” NOW STATE!\n  // --------------------------------------------\n  const [containerState, setContainerState] = useState({});\n  // containerId: [instanceIds...]\n  const [anyDragging, setAnyDragging] = useState(false);\n\n  // --------------------------------------------\n  // SEED INITIAL TASKBOX PANEL (only once)\n  // --------------------------------------------\n  // â­ A clean starter dataset\n  const starterData = [{\n    label: \"Item 1\",\n    childrenSortable: true,\n    children: [{\n      label: \"Subtask A\"\n    }, {\n      label: \"Subtask B\"\n    }]\n  }, {\n    label: \"Item 2\",\n    childrenSortable: true,\n    children: []\n  }, {\n    label: \"Item 3\",\n    childrenSortable: false\n  }];\n  useEffect(() => {\n    if (panels.length > 0) return;\n    const panelId = crypto.randomUUID();\n    const containerId = `taskbox-${panelId}`;\n\n    // â­ Build full tree from starterData\n    const rootInstanceIds = buildInstanceTree(starterData, instanceStoreRef.current);\n\n    // Attach top-level items to the container\n    setContainerState(prev => ({\n      ...prev,\n      [containerId]: rootInstanceIds\n    }));\n\n    // Add panel\n    setPanels([{\n      id: panelId,\n      type: \"taskbox\",\n      row: 0,\n      col: 0,\n      width: 1,\n      height: 1,\n      props: {\n        containerId\n      }\n    }]);\n  }, []);\n  // run once\n  // Remove instId from ALL locations: root containers + parent.children arrays\n  const detachEverywhere = instId => {\n    // Remove from root containerState\n    setContainerState(prev => {\n      const next = {};\n      for (const [cid, arr] of Object.entries(prev)) {\n        next[cid] = arr.filter(id => id !== instId);\n      }\n      return next;\n    });\n\n    // Remove from ALL nested child arrays\n    Object.values(instanceStoreRef.current).forEach(inst => {\n      var _inst$children;\n      inst.children = (_inst$children = inst.children) === null || _inst$children === void 0 ? void 0 : _inst$children.filter(id => id !== instId);\n    });\n  };\n\n  // --------------------------------------------\n  // FIND NEXT GRID SPOT\n  // --------------------------------------------\n  const findNextSpot = () => {\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < cols; c++) {\n        if (!panels.some(p => p.row === r && p.col === c)) {\n          return {\n            row: r,\n            col: c\n          };\n        }\n      }\n    }\n    return null;\n  };\n\n  // --------------------------------------------\n  // ADD PANEL (TaskBox only, for now)\n  // --------------------------------------------\n  const addPanel = () => {\n    const spot = findNextSpot();\n    if (!spot) return;\n    const panelId = crypto.randomUUID();\n    const containerId = `taskbox-${panelId}`;\n    const instIds = [];\n    for (let i = 0; i < 3; i++) {\n      const taskId = crypto.randomUUID();\n      const instId = crypto.randomUUID();\n      instanceStoreRef.current[instId] = {\n        taskId,\n        label: `Item ${String.fromCharCode(65 + i)}`,\n        instanceId: instId\n      };\n      instIds.push(instId);\n    }\n\n    // add container\n    setContainerState(prev => ({\n      ...prev,\n      [containerId]: instIds\n    }));\n\n    // add panel\n    setPanels(prev => [...prev, {\n      id: panelId,\n      type: \"taskbox\",\n      row: spot.row,\n      col: spot.col,\n      width: 1,\n      height: 1,\n      props: {\n        containerId\n      }\n    }]);\n  };\n\n  // --------------------------------------------\n  // DRAG STATE (active item)\n  // --------------------------------------------\n  const activeRef = useRef(null);\n  // { instanceId, fromContainerId }\n\n  // --------------------------------------------\n  // ON DRAG START\n  // --------------------------------------------\n  const handleDragStart = ({\n    active\n  }) => {\n    setAnyDragging(true); // ðŸ”¥ notify all components\n    const data = active.data.current || {};\n    activeRef.current = {\n      instanceId: data.instanceId,\n      fromContainerId: data.containerId\n    };\n  };\n  const handleDragOver = ({\n    active,\n    over\n  }) => {\n    var _over$id;\n    if (!active || !over) return;\n    const info = activeRef.current;\n    if (!info) return;\n    const instId = info.instanceId;\n    const from = info.fromContainerId;\n    const overData = over.data.current || {};\n    const to = overData.containerId;\n    if (!to) return;\n    const isNested = to.startsWith(\"children-\");\n    const parentId = isNested ? to.replace(\"children-\", \"\") : null;\n\n    // ----------------------------------------\n    // â­ NEW: bottom-droppable slot\n    // ----------------------------------------\n    if ((_over$id = over.id) !== null && _over$id !== void 0 && _over$id.startsWith(\"bottom-\")) {\n      const parentId = to.replace(\"children-\", \"\");\n      detachEverywhere(instId);\n      instanceStoreRef.current[parentId].children.push(instId);\n      activeRef.current.fromContainerId = to;\n      return;\n    }\n\n    // skip nested-container group header\n    if (overData.role === \"nested-container\") return;\n    const hoveringEmptyArea = over.id === to && !overData.instanceId;\n\n    // ----------------------------------------\n    // EMPTY DROP ZONE\n    // ----------------------------------------\n    if (hoveringEmptyArea) {\n      detachEverywhere(instId);\n      setContainerState(prev => ({\n        ...prev,\n        [to]: [...(prev[to] || []), instId]\n      }));\n      activeRef.current.fromContainerId = to;\n      if (isNested) {\n        instanceStoreRef.current[parentId].children.push(instId);\n      }\n      return;\n    }\n\n    // ----------------------------------------\n    // CROSS-CONTAINER MOVE\n    // ----------------------------------------\n    if (from !== to) {\n      detachEverywhere(instId);\n      setContainerState(prev => ({\n        ...prev,\n        [to]: [...(prev[to] || []), instId]\n      }));\n      activeRef.current.fromContainerId = to;\n      if (isNested) {\n        instanceStoreRef.current[parentId].children.push(instId);\n      }\n      return;\n    }\n\n    // same-container sorting happens at dragEnd\n  };\n  const handleDragEnd = ({\n    active,\n    over\n  }) => {\n    var _over$id2;\n    setAnyDragging(false);\n    const info = activeRef.current;\n    activeRef.current = null;\n    if (!active || !over || !info) return;\n    const instId = active.data.current.instanceId;\n    const overData = over.data.current || {};\n    const toContainer = overData.containerId;\n    if (!toContainer) return;\n\n    // ------------------------------------\n    // â­ Nested bottom-slot â†’ push to end\n    // ------------------------------------\n    if ((_over$id2 = over.id) !== null && _over$id2 !== void 0 && _over$id2.startsWith(\"bottom-\")) {\n      const parentId = toContainer.replace(\"children-\", \"\");\n      const arr = instanceStoreRef.current[parentId].children;\n      const oldIdx = arr.indexOf(instId);\n      if (oldIdx !== -1) arr.splice(oldIdx, 1);\n      arr.push(instId);\n      return;\n    }\n\n    // ------------------------------------\n    // ROOT SORTING\n    // ------------------------------------\n    setContainerState(prev => {\n      const arr = prev[toContainer];\n      if (!arr) return prev;\n      if (overData.instanceId && overData.instanceId !== instId) {\n        const target = overData.instanceId;\n        const oldIndex = arr.indexOf(instId);\n        const newIndex = arr.indexOf(target);\n        if (oldIndex !== -1 && newIndex !== -1) {\n          const reordered = [...arr];\n          reordered.splice(oldIndex, 1);\n          reordered.splice(newIndex, 0, instId);\n          return {\n            ...prev,\n            [toContainer]: reordered\n          };\n        }\n      }\n      return prev;\n    });\n\n    // ------------------------------------\n    // NESTED SORTING\n    // ------------------------------------\n    if (toContainer.startsWith(\"children-\")) {\n      const parentId = toContainer.replace(\"children-\", \"\");\n      const arr = instanceStoreRef.current[parentId].children;\n      const overId = over.data.current.instanceId;\n      const oldIdx = arr.indexOf(instId);\n      const newIdx = arr.indexOf(overId);\n      if (oldIdx !== -1 && newIdx !== -1) {\n        arr.splice(oldIdx, 1);\n        arr.splice(newIdx, 0, instId);\n      }\n    }\n  };\n\n  // --------------------------------------------\n  // EDIT ITEM â€” update instanceStoreRef safely\n  // --------------------------------------------\n  const editItem = (instanceId, newLabel) => {\n    instanceStoreRef.current = {\n      ...instanceStoreRef.current,\n      [instanceId]: {\n        ...instanceStoreRef.current[instanceId],\n        label: newLabel\n      }\n    };\n  };\n  const deleteItem = instanceId => {\n    // 1. Remove instance from instanceStore\n    const copy = {\n      ...instanceStoreRef.current\n    };\n    delete copy[instanceId];\n    instanceStoreRef.current = copy;\n\n    // 2. Remove instance from all containers\n    setContainerState(prev => {\n      const next = {};\n      for (const [cid, arr] of Object.entries(prev)) {\n        next[cid] = arr.filter(id => id !== instanceId);\n      }\n      return next;\n    });\n  };\n\n  // --------------------------------------------\n  // DRAG OVERLAY (optional)\n  // --------------------------------------------\n  const renderDragOverlay = ({\n    active\n  }) => {\n    var _active$data;\n    if (!(active !== null && active !== void 0 && (_active$data = active.data) !== null && _active$data !== void 0 && _active$data.current)) return null;\n    const d = active.data.current;\n    const inst = instanceStoreRef.current[d.instanceId];\n    if (!inst) return null;\n    return /*#__PURE__*/_jsxDEV(SortableItem, {\n      id: `overlay-${d.instanceId}`,\n      instanceId: d.instanceId,\n      label: inst.label,\n      isDragPreview: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 7\n    }, this);\n  };\n\n  // --------------------------------------------\n  // Component mapping (unchanged)\n  // --------------------------------------------\n  const components = useMemo(() => ({\n    taskbox: TaskBox,\n    schedule: Schedule\n  }), []);\n\n  // --------------------------------------------\n  // UI + GRID\n  // --------------------------------------------\n  return /*#__PURE__*/_jsxDEV(ScheduleContext.Provider, {\n    value: {\n      panels,\n      setPanels,\n      instanceStoreRef,\n      containerState,\n      setContainerState,\n      editItem,\n      deleteItem,\n      anyDragging\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-color-mode\": \"dark\",\n      style: {\n        background: \"#1D2125\",\n        height: \"100vh\",\n        overflow: \"hidden\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: showToolbar ? 0 : \"-60px\",\n          width: \"100%\",\n          height: 60,\n          background: \"#1C1F26\",\n          borderBottom: \"1px solid #444\",\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 10,\n          paddingLeft: 10,\n          transition: \"top 200ms ease\",\n          zIndex: 5000\n        },\n        children: [/*#__PURE__*/_jsxDEV(Textfield, {\n          label: \"Rows\",\n          type: \"number\",\n          value: rows,\n          onChange: e => setRows(+e.target.value || 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Textfield, {\n          label: \"Columns\",\n          type: \"number\",\n          value: cols,\n          onChange: e => setCols(+e.target.value || 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          appearance: \"primary\",\n          onClick: addPanel,\n          children: \"Add Panel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          appearance: \"warning\",\n          onClick: () => setShowToolbar(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        rows: rows,\n        cols: cols,\n        panels: panels,\n        setPanels: setPanels,\n        components: components,\n        handleDragStartProp: handleDragStart,\n        handleDragOverProp: handleDragOver,\n        handleDragEndProp: handleDragEnd,\n        renderDragOverlay: renderDragOverlay,\n        toggleToolbar: () => setShowToolbar(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 427,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"74BnzGFG4PM/jkyArJ6ArcXNO/8=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useMemo","useEffect","Textfield","Button","Grid","TaskBox","Schedule","SortableItem","ScheduleContext","jsxDEV","_jsxDEV","buildInstanceTree","dataArray","instanceStore","rootIds","item","_item$label","_item$childrenSortabl","instId","crypto","randomUUID","instanceId","taskId","label","childrenSortable","children","push","length","childIds","App","_s","panels","setPanels","rows","setRows","cols","setCols","showToolbar","setShowToolbar","instanceStoreRef","containerState","setContainerState","anyDragging","setAnyDragging","starterData","panelId","containerId","rootInstanceIds","current","prev","id","type","row","col","width","height","props","detachEverywhere","next","cid","arr","Object","entries","filter","values","forEach","inst","_inst$children","findNextSpot","r","c","some","p","addPanel","spot","instIds","i","String","fromCharCode","activeRef","handleDragStart","active","data","fromContainerId","handleDragOver","over","_over$id","info","from","overData","to","isNested","startsWith","parentId","replace","role","hoveringEmptyArea","handleDragEnd","_over$id2","toContainer","oldIdx","indexOf","splice","target","oldIndex","newIndex","reordered","overId","newIdx","editItem","newLabel","deleteItem","copy","renderDragOverlay","_active$data","d","isDragPreview","fileName","_jsxFileName","lineNumber","columnNumber","components","taskbox","schedule","Provider","value","style","background","overflow","position","top","borderBottom","display","alignItems","gap","paddingLeft","transition","zIndex","onChange","e","appearance","onClick","handleDragStartProp","handleDragOverProp","handleDragEndProp","toggleToolbar","_c","$RefreshReg$"],"sources":["/data/data/com.termux/files/home/dndkittest/src/App.js"],"sourcesContent":["// App.js â€” CLEAN ARCHITECTURE with useState containerState\nimport React, { useState, useRef, useMemo, useEffect } from \"react\";\nimport Textfield from \"@atlaskit/textfield\";\nimport Button from \"@atlaskit/button\";\n\nimport Grid from \"./Grid\";\nimport TaskBox from \"./TaskBox\";\nimport Schedule from \"./Schedule\";\nimport SortableItem from \"./SortableItem\";\nimport { ScheduleContext } from \"./ScheduleContext\";\n\nimport \"./index.css\";\nfunction buildInstanceTree(dataArray, instanceStore) {\n  const rootIds = [];\n\n  for (const item of dataArray) {\n    const instId = crypto.randomUUID();\n\n    // Insert the instance (children to be filled next)\n    instanceStore[instId] = {\n      instanceId: instId,\n      taskId: crypto.randomUUID(),\n      label: item.label ?? \"Untitled\",\n      childrenSortable: item.childrenSortable ?? false,\n      children: []\n    };\n\n    // Track top-level instance\n    rootIds.push(instId);\n\n    // If children exist, recursively build\n    if (item.children && item.children.length > 0) {\n      const childIds = buildInstanceTree(item.children, instanceStore);\n      instanceStore[instId].children = childIds;\n    }\n  }\n\n  return rootIds;\n}\n\nexport default function App() {\n\n  // --------------------------------------------\n  // GRID PANELS (TaskBoxes / Schedules)\n  // --------------------------------------------\n  const [panels, setPanels] = useState([]);\n\n  const [rows, setRows] = useState(2);\n  const [cols, setCols] = useState(3);\n  const [showToolbar, setShowToolbar] = useState(false);\n\n  // --------------------------------------------\n  // INSTANCE STORE â€” master list of all instances\n  // --------------------------------------------\n  const instanceStoreRef = useRef({});\n\n  // --------------------------------------------\n  // CONTAINER MODEL (SHADOW LISTS) â€” NOW STATE!\n  // --------------------------------------------\n  const [containerState, setContainerState] = useState({});\n  // containerId: [instanceIds...]\n const [anyDragging, setAnyDragging] = useState(false);\n\n  // --------------------------------------------\n  // SEED INITIAL TASKBOX PANEL (only once)\n  // --------------------------------------------\n// â­ A clean starter dataset\nconst starterData = [\n  {\n    label: \"Item 1\",\n    childrenSortable: true,\n    children: [\n      { label: \"Subtask A\" },\n      { label: \"Subtask B\" }\n    ]\n  },\n  {\n    label: \"Item 2\",\n    childrenSortable: true,\n    children: []\n  },\n  {\n    label: \"Item 3\",\n    childrenSortable: false\n  }\n];\n\nuseEffect(() => {\n  if (panels.length > 0) return;\n\n  const panelId = crypto.randomUUID();\n  const containerId = `taskbox-${panelId}`;\n\n  // â­ Build full tree from starterData\n  const rootInstanceIds = buildInstanceTree(\n    starterData,\n    instanceStoreRef.current\n  );\n\n  // Attach top-level items to the container\n  setContainerState(prev => ({\n    ...prev,\n    [containerId]: rootInstanceIds\n  }));\n\n  // Add panel\n  setPanels([\n    {\n      id: panelId,\n      type: \"taskbox\",\n      row: 0,\n      col: 0,\n      width: 1,\n      height: 1,\n      props: { containerId }\n    }\n  ]);\n}, []);\n  // run once\n// Remove instId from ALL locations: root containers + parent.children arrays\nconst detachEverywhere = (instId) => {\n  // Remove from root containerState\n  setContainerState(prev => {\n    const next = {};\n    for (const [cid, arr] of Object.entries(prev)) {\n      next[cid] = arr.filter(id => id !== instId);\n    }\n    return next;\n  });\n\n  // Remove from ALL nested child arrays\n  Object.values(instanceStoreRef.current).forEach(inst => {\n    inst.children = inst.children?.filter(id => id !== instId);\n  });\n};\n\n  // --------------------------------------------\n  // FIND NEXT GRID SPOT\n  // --------------------------------------------\n  const findNextSpot = () => {\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < cols; c++) {\n        if (!panels.some(p => p.row === r && p.col === c)) {\n          return { row: r, col: c };\n        }\n      }\n    }\n    return null;\n  };\n\n  // --------------------------------------------\n  // ADD PANEL (TaskBox only, for now)\n  // --------------------------------------------\n  const addPanel = () => {\n    const spot = findNextSpot();\n    if (!spot) return;\n\n    const panelId = crypto.randomUUID();\n    const containerId = `taskbox-${panelId}`;\n\n    const instIds = [];\n\n    for (let i = 0; i < 3; i++) {\n      const taskId = crypto.randomUUID();\n      const instId = crypto.randomUUID();\n\n      instanceStoreRef.current[instId] = {\n        taskId,\n        label: `Item ${String.fromCharCode(65 + i)}`,\n        instanceId: instId\n      };\n\n      instIds.push(instId);\n    }\n\n    // add container\n    setContainerState(prev => ({\n      ...prev,\n      [containerId]: instIds\n    }));\n\n    // add panel\n    setPanels(prev => [\n      ...prev,\n      {\n        id: panelId,\n        type: \"taskbox\",\n        row: spot.row,\n        col: spot.col,\n        width: 1,\n        height: 1,\n        props: { containerId }\n      }\n    ]);\n  };\n\n  // --------------------------------------------\n  // DRAG STATE (active item)\n  // --------------------------------------------\n  const activeRef = useRef(null);\n  // { instanceId, fromContainerId }\n\n  // --------------------------------------------\n  // ON DRAG START\n  // --------------------------------------------\n  const handleDragStart = ({ active }) => {\n    setAnyDragging(true);   // ðŸ”¥ notify all components\n    const data = active.data.current || {};\n    activeRef.current = {\n      instanceId: data.instanceId,\n      fromContainerId: data.containerId\n    };\n  };\n\n const handleDragOver = ({ active, over }) => {\n  if (!active || !over) return;\n\n  const info = activeRef.current;\n  if (!info) return;\n\n  const instId = info.instanceId;\n  const from = info.fromContainerId;\n\n  const overData = over.data.current || {};\n  const to = overData.containerId;\n  if (!to) return;\n\n  const isNested = to.startsWith(\"children-\");\n  const parentId = isNested ? to.replace(\"children-\", \"\") : null;\n\n  // ----------------------------------------\n  // â­ NEW: bottom-droppable slot\n  // ----------------------------------------\n  if (over.id?.startsWith(\"bottom-\")) {\n    const parentId = to.replace(\"children-\", \"\");\n    detachEverywhere(instId);\n\n    instanceStoreRef.current[parentId].children.push(instId);\n\n    activeRef.current.fromContainerId = to;\n    return;\n  }\n\n  // skip nested-container group header\n  if (overData.role === \"nested-container\") return;\n\n  const hoveringEmptyArea =\n    over.id === to && !overData.instanceId;\n\n  // ----------------------------------------\n  // EMPTY DROP ZONE\n  // ----------------------------------------\n  if (hoveringEmptyArea) {\n    detachEverywhere(instId);\n\n    setContainerState(prev => ({\n      ...prev,\n      [to]: [...(prev[to] || []), instId]\n    }));\n\n    activeRef.current.fromContainerId = to;\n\n    if (isNested) {\n      instanceStoreRef.current[parentId].children.push(instId);\n    }\n\n    return;\n  }\n\n  // ----------------------------------------\n  // CROSS-CONTAINER MOVE\n  // ----------------------------------------\n  if (from !== to) {\n    detachEverywhere(instId);\n\n    setContainerState(prev => ({\n      ...prev,\n      [to]: [...(prev[to] || []), instId]\n    }));\n\n    activeRef.current.fromContainerId = to;\n\n    if (isNested) {\n      instanceStoreRef.current[parentId].children.push(instId);\n    }\n\n    return;\n  }\n\n  // same-container sorting happens at dragEnd\n};\n\n\n\nconst handleDragEnd = ({ active, over }) => {\n  setAnyDragging(false);\n\n  const info = activeRef.current;\n  activeRef.current = null;\n\n  if (!active || !over || !info) return;\n\n  const instId = active.data.current.instanceId;\n  const overData = over.data.current || {};\n  const toContainer = overData.containerId;\n  if (!toContainer) return;\n\n  // ------------------------------------\n  // â­ Nested bottom-slot â†’ push to end\n  // ------------------------------------\n  if (over.id?.startsWith(\"bottom-\")) {\n    const parentId = toContainer.replace(\"children-\", \"\");\n    const arr = instanceStoreRef.current[parentId].children;\n\n    const oldIdx = arr.indexOf(instId);\n    if (oldIdx !== -1) arr.splice(oldIdx, 1);\n    arr.push(instId);\n\n    return;\n  }\n\n  // ------------------------------------\n  // ROOT SORTING\n  // ------------------------------------\n  setContainerState(prev => {\n    const arr = prev[toContainer];\n    if (!arr) return prev;\n\n    if (overData.instanceId && overData.instanceId !== instId) {\n      const target = overData.instanceId;\n\n      const oldIndex = arr.indexOf(instId);\n      const newIndex = arr.indexOf(target);\n\n      if (oldIndex !== -1 && newIndex !== -1) {\n        const reordered = [...arr];\n        reordered.splice(oldIndex, 1);\n        reordered.splice(newIndex, 0, instId);\n        return { ...prev, [toContainer]: reordered };\n      }\n    }\n\n    return prev;\n  });\n\n  // ------------------------------------\n  // NESTED SORTING\n  // ------------------------------------\n  if (toContainer.startsWith(\"children-\")) {\n    const parentId = toContainer.replace(\"children-\", \"\");\n    const arr = instanceStoreRef.current[parentId].children;\n    const overId = over.data.current.instanceId;\n\n    const oldIdx = arr.indexOf(instId);\n    const newIdx = arr.indexOf(overId);\n\n    if (oldIdx !== -1 && newIdx !== -1) {\n      arr.splice(oldIdx, 1);\n      arr.splice(newIdx, 0, instId);\n    }\n  }\n};\n\n\n\n  // --------------------------------------------\n  // EDIT ITEM â€” update instanceStoreRef safely\n  // --------------------------------------------\n  const editItem = (instanceId, newLabel) => {\n    instanceStoreRef.current = {\n      ...instanceStoreRef.current,\n      [instanceId]: {\n        ...instanceStoreRef.current[instanceId],\n        label: newLabel\n      }\n    };\n  };\n\n  const deleteItem = (instanceId) => {\n    // 1. Remove instance from instanceStore\n    const copy = { ...instanceStoreRef.current };\n    delete copy[instanceId];\n    instanceStoreRef.current = copy;\n\n    // 2. Remove instance from all containers\n    setContainerState(prev => {\n      const next = {};\n      for (const [cid, arr] of Object.entries(prev)) {\n        next[cid] = arr.filter(id => id !== instanceId);\n      }\n      return next;\n    });\n  };\n\n  // --------------------------------------------\n  // DRAG OVERLAY (optional)\n  // --------------------------------------------\n  const renderDragOverlay = ({ active }) => {\n    if (!active?.data?.current) return null;\n\n    const d = active.data.current;\n    const inst = instanceStoreRef.current[d.instanceId];\n    if (!inst) return null;\n\n    return (\n      <SortableItem\n        id={`overlay-${d.instanceId}`}\n        instanceId={d.instanceId}\n        label={inst.label}\n        isDragPreview={true}\n      />\n    );\n  };\n\n  // --------------------------------------------\n  // Component mapping (unchanged)\n  // --------------------------------------------\n  const components = useMemo(() => ({\n    taskbox: TaskBox,\n    schedule: Schedule\n  }), []);\n\n  // --------------------------------------------\n  // UI + GRID\n  // --------------------------------------------\n  return (\n    <ScheduleContext.Provider value={{\n      panels,\n      setPanels,\n      instanceStoreRef,\n      containerState,\n      setContainerState,\n      editItem,\n      deleteItem,\n      anyDragging\n    }}>\n      <div data-color-mode=\"dark\" style={{ background: \"#1D2125\", height: \"100vh\", overflow: \"hidden\" }}>\n\n        {/* Toolbar */}\n        <div\n          style={{\n            position: \"absolute\",\n            top: showToolbar ? 0 : \"-60px\",\n            width: \"100%\",\n            height: 60,\n            background: \"#1C1F26\",\n            borderBottom: \"1px solid #444\",\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: 10,\n            paddingLeft: 10,\n            transition: \"top 200ms ease\",\n            zIndex: 5000\n          }}\n        >\n          <Textfield\n            label=\"Rows\"\n            type=\"number\"\n            value={rows}\n            onChange={(e) => setRows(+e.target.value || 1)}\n          />\n          <Textfield\n            label=\"Columns\"\n            type=\"number\"\n            value={cols}\n            onChange={(e) => setCols(+e.target.value || 1)}\n          />\n\n          <Button appearance=\"primary\" onClick={addPanel}>\n            Add Panel\n          </Button>\n\n          <Button appearance=\"warning\" onClick={() => setShowToolbar(false)}>\n            Close\n          </Button>\n        </div>\n\n        <Grid\n          rows={rows}\n          cols={cols}\n          panels={panels}\n          setPanels={setPanels}\n          components={components}\n          handleDragStartProp={handleDragStart}\n          handleDragOverProp={handleDragOver}\n          handleDragEndProp={handleDragEnd}\n          renderDragOverlay={renderDragOverlay}\n          toggleToolbar={() => setShowToolbar(true)}\n        />\n      </div>\n    </ScheduleContext.Provider>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}