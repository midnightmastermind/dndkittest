{"ast":null,"code":"var _jsxFileName = \"/data/data/com.termux/files/home/dndkittest/src/Grid.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport { DndContext, PointerSensor, useSensor, useSensors, DragOverlay, pointerWithin, useDndContext } from \"@dnd-kit/core\";\nimport Panel from \"./Panel\";\nimport PanelClone from \"./PanelClone\";\nimport { useDroppable } from \"@dnd-kit/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CellDroppable({\n  r,\n  c,\n  dark\n}) {\n  _s();\n  var _active$data, _active$data$current;\n  const {\n    active\n  } = useDndContext();\n  const isPanelDrag = (active === null || active === void 0 ? void 0 : (_active$data = active.data) === null || _active$data === void 0 ? void 0 : (_active$data$current = _active$data.current) === null || _active$data$current === void 0 ? void 0 : _active$data$current.role) === \"panel\";\n  const {\n    setNodeRef,\n    isOver\n  } = useDroppable({\n    id: `cell-${r}-${c}`,\n    data: {\n      role: \"grid-cell\",\n      row: r,\n      col: c\n    }\n  });\n  useEffect(() => {\n    if (isOver) console.log(\"ðŸ”¥ OVER CELL:\", r, c);\n  }, [isOver]);\n  const highlight = isPanelDrag && isOver;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setNodeRef,\n    style: {\n      background: highlight ? \"rgba(50,150,255,0.45)\" : dark ? \"#22272B\" : \"#2C333A\",\n      border: \"1px solid #3F444A\",\n      transition: \"background 80ms\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n_s(CellDroppable, \"Dyfoy6NagVhSQyZd2f06fNUBxd8=\", false, function () {\n  return [useDndContext, useDroppable];\n});\n_c = CellDroppable;\nexport default function Grid({\n  rows,\n  cols,\n  panels,\n  setPanels,\n  tasks,\n  setTasks,\n  toggleToolbar\n}) {\n  _s2();\n  const gridRef = useRef(null);\n  const [activeId, setActiveId] = useState(null);\n  const [colSizes, setColSizes] = useState(() => Array(cols).fill(1));\n  const [rowSizes, setRowSizes] = useState(() => Array(rows).fill(1));\n  useEffect(() => setColSizes(Array(cols).fill(1)), [cols]);\n  useEffect(() => setRowSizes(Array(rows).fill(1)), [rows]);\n\n  // expose FR track sizes to panels\n  useEffect(() => {\n    if (gridRef.current) {\n      gridRef.current.dataset.sizes = JSON.stringify({\n        colSizes,\n        rowSizes\n      });\n    }\n  }, [colSizes, rowSizes]);\n  const colTemplate = colSizes.map(s => `${s}fr`).join(\" \");\n  const rowTemplate = rowSizes.map(s => `${s}fr`).join(\" \");\n  const sensors = useSensors(useSensor(PointerSensor, {\n    activationConstraint: {\n      distance: 4\n    }\n  }));\n  const getPanel = id => panels.find(p => p.id === id);\n\n  // pointer â†’ grid cell\n  const getCellFromPointer = (clientX, clientY) => {\n    const rect = gridRef.current.getBoundingClientRect();\n    const relX = (clientX - rect.left) / rect.width;\n    const relY = (clientY - rect.top) / rect.height;\n    const totalCols = colSizes.reduce((a, b) => a + b, 0);\n    let acc = 0;\n    let col = 0;\n    for (let i = 0; i < colSizes.length; i++) {\n      acc += colSizes[i];\n      if (relX < acc / totalCols) {\n        col = i;\n        break;\n      }\n    }\n    const totalRows = rowSizes.reduce((a, b) => a + b, 0);\n    acc = 0;\n    let row = 0;\n    for (let i = 0; i < rowSizes.length; i++) {\n      acc += rowSizes[i];\n      if (relY < acc / totalRows) {\n        row = i;\n        break;\n      }\n    }\n    return {\n      col,\n      row\n    };\n  };\n\n  // âœ… cursor tracking: always pointerStart + delta\n  const getPointerXY = event => {\n    const data = event.active.data.current;\n    if (!data || !data.pointerStart) return null;\n    return {\n      x: data.pointerStart.x + event.delta.x,\n      y: data.pointerStart.y + event.delta.y\n    };\n  };\n  const [hoverCell, setHoverCell] = useState(null);\n\n  // ----------------------------------------------------------\n  // DRAG START\n  // ----------------------------------------------------------\n  const handleDragStart = event => {\n    var _e$clientX, _e$touches, _e$touches$, _e$clientY, _e$touches2, _e$touches2$;\n    setActiveId(event.active.id);\n    const e = event.activatorEvent;\n    const clientX = (_e$clientX = e === null || e === void 0 ? void 0 : e.clientX) !== null && _e$clientX !== void 0 ? _e$clientX : e === null || e === void 0 ? void 0 : (_e$touches = e.touches) === null || _e$touches === void 0 ? void 0 : (_e$touches$ = _e$touches[0]) === null || _e$touches$ === void 0 ? void 0 : _e$touches$.clientX;\n    const clientY = (_e$clientY = e === null || e === void 0 ? void 0 : e.clientY) !== null && _e$clientY !== void 0 ? _e$clientY : e === null || e === void 0 ? void 0 : (_e$touches2 = e.touches) === null || _e$touches2 === void 0 ? void 0 : (_e$touches2$ = _e$touches2[0]) === null || _e$touches2$ === void 0 ? void 0 : _e$touches2$.clientY;\n\n    // Make sure data.current exists:\n    if (!event.active.data.current) {\n      event.active.data.current = {\n        ...event.active.data\n      };\n    }\n\n    // DO NOT SPREAD event.active.data.current (it resets keys)\n    event.active.data.current.pointerStart = {\n      x: clientX,\n      y: clientY\n    };\n    console.log(\"dragStart data:\", event.active.data.current);\n  };\n\n  // ----------------------------------------------------------\n  // DRAG MOVE (panel-only highlight, based on mouse position)\n  // ----------------------------------------------------------\n  const handleDragMove = event => {\n    console.log(event);\n    const data = event.active.data.current;\n    console.log(\"DRAGGED:\", data);\n    console.log(\"OVER:\", event.over);\n\n    // If it's not a panel, don't show a hover cell\n    if ((data === null || data === void 0 ? void 0 : data.type) !== \"panel\") {\n      setHoverCell(null);\n      return;\n    }\n    const pointer = getPointerXY(event);\n    if (!pointer) return;\n    const {\n      col,\n      row\n    } = getCellFromPointer(pointer.x, pointer.y);\n    setHoverCell({\n      col,\n      row\n    });\n  };\n\n  // ----------------------------------------------------------\n  // DRAG END\n  // ----------------------------------------------------------\n  const handleDragEnd = event => {\n    setActiveId(null);\n    setHoverCell(null);\n    const active = event.active;\n    const over = event.over;\n    console.log(over);\n    if (!over) return;\n    console.log(event);\n    const data = active.data.current;\n    const isTask = (data === null || data === void 0 ? void 0 : data.role) === \"task\";\n\n    // -----------------------------\n    // TASK DRAG â€” TWO WAY FLOW\n    // -----------------------------\n    if (isTask) {\n      const activeId = active.id;\n      const fromPanelId = data.fromPanelId;\n      const toPanelId = over.id;\n      if (!toPanelId || !fromPanelId || over.data.current.role == \"grid-cell\") return;\n      setPanels(list => list.map(p => {\n        if (p.id === fromPanelId) {\n          return {\n            ...p,\n            tasks: p.tasks.filter(t => t !== activeId)\n          };\n        }\n        if (p.id === toPanelId) {\n          return {\n            ...p,\n            tasks: [...p.tasks, activeId]\n          };\n        }\n        return p;\n      }));\n      return;\n    }\n    console.log(data);\n    if ((data === null || data === void 0 ? void 0 : data.role) === \"panel\") {\n      console.log(\"Hit\");\n      const pointer = getPointerXY(event);\n      console.log(pointer);\n      if (!pointer) return;\n      const {\n        col,\n        row\n      } = getCellFromPointer(pointer.x, pointer.y);\n      console.log(\"ðŸ“Œ PANEL DROP TARGET:\", {\n        row,\n        col\n      });\n      setPanels(list => list.map(p => p.id === active.id ? {\n        ...p,\n        col,\n        row,\n        width: 1,\n        height: 1\n      } : p));\n      return;\n    }\n  };\n\n  // resizing\n  const resizeColumn = (i, movement) => {\n    setColSizes(sizes => {\n      const next = i + 1;\n      if (next >= sizes.length) return sizes;\n      const copy = [...sizes];\n      copy[i] += movement / 300;\n      copy[next] -= movement / 300;\n      copy[i] = Math.max(0.3, copy[i]);\n      copy[next] = Math.max(0.3, copy[next]);\n      return copy;\n    });\n  };\n  const resizeRow = (i, movement) => {\n    setRowSizes(sizes => {\n      const next = i + 1;\n      if (next >= sizes.length) return sizes;\n      const copy = [...sizes];\n      copy[i] += movement / 300;\n      copy[next] -= movement / 300;\n      copy[i] = Math.max(0.3, copy[i]);\n      copy[next] = Math.max(0.3, copy[next]);\n      return copy;\n    });\n  };\n\n  // -------------------------------\n  // TOUCH + MOUSE RESIZE HELPERS\n  // -------------------------------\n\n  const getClientX = e => e.touches ? e.touches[0].clientX : e.clientX;\n  const getClientY = e => e.touches ? e.touches[0].clientY : e.clientY;\n\n  // ----- START COLUMN RESIZE -----\n  const startColResize = (e, i) => {\n    e.preventDefault();\n    let startX = getClientX(e);\n    const move = ev => {\n      const delta = getClientX(ev) - startX;\n      startX = getClientX(ev);\n      resizeColumn(i, delta);\n    };\n    const stop = () => {\n      window.removeEventListener(\"mousemove\", move);\n      window.removeEventListener(\"mouseup\", stop);\n      window.removeEventListener(\"touchmove\", move);\n      window.removeEventListener(\"touchend\", stop);\n    };\n    window.addEventListener(\"mousemove\", move);\n    window.addEventListener(\"mouseup\", stop);\n    window.addEventListener(\"touchmove\", move);\n    window.addEventListener(\"touchend\", stop);\n  };\n\n  // ----- START ROW RESIZE -----\n  const startRowResize = (e, i) => {\n    e.preventDefault();\n    let startY = getClientY(e);\n    const move = ev => {\n      const delta = getClientY(ev) - startY;\n      startY = getClientY(ev);\n      resizeRow(i, delta);\n    };\n    const stop = () => {\n      window.removeEventListener(\"mousemove\", move);\n      window.removeEventListener(\"mouseup\", stop);\n      window.removeEventListener(\"touchmove\", move);\n      window.removeEventListener(\"touchend\", stop);\n    };\n    window.addEventListener(\"mousemove\", move);\n    window.addEventListener(\"mouseup\", stop);\n    window.addEventListener(\"touchmove\", move);\n    window.addEventListener(\"touchend\", stop);\n  };\n\n  // ----------------------------------------------------------\n  // RENDER\n  // ----------------------------------------------------------\n  return /*#__PURE__*/_jsxDEV(DndContext, {\n    sensors: sensors,\n    collisionDetection: pointerWithin,\n    onDragStart: handleDragStart,\n    onDragMove: handleDragMove,\n    onDragEnd: handleDragEnd,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        inset: 0,\n        background: \"#1D2125\",\n        overflow: \"hidden\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: toggleToolbar,\n        style: {\n          position: \"absolute\",\n          top: 10,\n          right: 10,\n          width: 42,\n          height: 42,\n          background: \"#2C313A\",\n          border: \"1px solid #444\",\n          borderRadius: 8,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          color: \"white\",\n          cursor: \"pointer\",\n          zIndex: 2\n        },\n        children: \"\\uD83D\\uDD27\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: gridRef,\n        style: {\n          position: \"absolute\",\n          inset: 0,\n          /* ADD THESE */\n          width: \"100%\",\n          maxWidth: \"100%\",\n          overflow: \"hidden\",\n          height: \"93vh\",\n          display: \"grid\",\n          gridTemplateColumns: colTemplate,\n          gridTemplateRows: rowTemplate,\n          touchAction: \"none\",\n          // â† blocks pull-to-refresh\n          overscrollBehaviorY: \"none\" // â† prevents bounce refresh\n        },\n        children: [hoverCell && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            gridColumnStart: hoverCell.col + 1,\n            gridRowStart: hoverCell.row + 1,\n            gridColumnEnd: hoverCell.col + 2,\n            gridRowEnd: hoverCell.row + 2,\n            background: \"rgba(50,150,255,0.45)\",\n            pointerEvents: \"none\",\n            zIndex: 5\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 13\n        }, this), [...Array(rows)].map((_, r) => [...Array(cols)].map((_, c) => {\n          const dark = (r + c) % 2 === 0;\n          return /*#__PURE__*/_jsxDEV(CellDroppable, {\n            r: r,\n            c: c,\n            dark: dark\n          }, `${r}-${c}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 17\n          }, this);\n        })), colSizes.map((_, i) => i < colSizes.length - 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          onMouseDown: e => startColResize(e, i),\n          onTouchStart: e => startColResize(e, i),\n          style: {\n            position: \"absolute\",\n            top: 0,\n            bottom: 0,\n            left: `calc(${100 * colSizes.slice(0, i + 1).reduce((a, b) => a + b, 0) / colSizes.reduce((a, b) => a + b, 0)}%)`,\n            width: 6,\n            marginLeft: -3,\n            cursor: \"col-resize\",\n            background: \"rgba(255,255,255,0.15)\",\n            zIndex: 50,\n            touchAction: \"none\" // prevents view scrolling during resize\n          }\n        }, `col-handle-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 15\n        }, this) : null), rowSizes.map((_, i) => i < rowSizes.length - 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          onMouseDown: e => startRowResize(e, i),\n          onTouchStart: e => startRowResize(e, i),\n          style: {\n            position: \"absolute\",\n            left: 0,\n            right: 0,\n            top: `calc(${100 * rowSizes.slice(0, i + 1).reduce((a, b) => a + b, 0) / rowSizes.reduce((a, b) => a + b, 0)}%)`,\n            height: 6,\n            marginTop: -3,\n            cursor: \"row-resize\",\n            background: \"rgba(255,255,255,0.15)\",\n            zIndex: 50,\n            touchAction: \"none\"\n          }\n        }, `row-handle-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 15\n        }, this) : null), panels.map(p => /*#__PURE__*/_jsxDEV(Panel, {\n          panel: p,\n          setPanels: setPanels,\n          tasks: tasks,\n          setTasks: setTasks,\n          gridRef: gridRef,\n          cols: cols,\n          rows: rows,\n          activeId: activeId\n        }, p.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DragOverlay, {\n      zIndex: 100000,\n      children: [activeId && getPanel(activeId) ? /*#__PURE__*/_jsxDEV(PanelClone, {\n        panel: getPanel(activeId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 11\n      }, this) : null, activeId && !getPanel(activeId) ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 8,\n          background: \"#334\",\n          color: \"white\",\n          borderRadius: 6\n        },\n        children: activeId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 342,\n    columnNumber: 5\n  }, this);\n}\n_s2(Grid, \"vZf5mT4VsImyeW0IeWGqsRmSHBI=\", false, function () {\n  return [useSensors, useSensor];\n});\n_c2 = Grid;\nvar _c, _c2;\n$RefreshReg$(_c, \"CellDroppable\");\n$RefreshReg$(_c2, \"Grid\");","map":{"version":3,"names":["React","useRef","useState","useEffect","DndContext","PointerSensor","useSensor","useSensors","DragOverlay","pointerWithin","useDndContext","Panel","PanelClone","useDroppable","jsxDEV","_jsxDEV","CellDroppable","r","c","dark","_s","_active$data","_active$data$current","active","isPanelDrag","data","current","role","setNodeRef","isOver","id","row","col","console","log","highlight","ref","style","background","border","transition","fileName","_jsxFileName","lineNumber","columnNumber","_c","Grid","rows","cols","panels","setPanels","tasks","setTasks","toggleToolbar","_s2","gridRef","activeId","setActiveId","colSizes","setColSizes","Array","fill","rowSizes","setRowSizes","dataset","sizes","JSON","stringify","colTemplate","map","s","join","rowTemplate","sensors","activationConstraint","distance","getPanel","find","p","getCellFromPointer","clientX","clientY","rect","getBoundingClientRect","relX","left","width","relY","top","height","totalCols","reduce","a","b","acc","i","length","totalRows","getPointerXY","event","pointerStart","x","delta","y","hoverCell","setHoverCell","handleDragStart","_e$clientX","_e$touches","_e$touches$","_e$clientY","_e$touches2","_e$touches2$","e","activatorEvent","touches","handleDragMove","over","type","pointer","handleDragEnd","isTask","fromPanelId","toPanelId","list","filter","t","resizeColumn","movement","next","copy","Math","max","resizeRow","getClientX","getClientY","startColResize","preventDefault","startX","move","ev","stop","window","removeEventListener","addEventListener","startRowResize","startY","collisionDetection","onDragStart","onDragMove","onDragEnd","children","position","inset","overflow","onClick","right","borderRadius","display","alignItems","justifyContent","color","cursor","zIndex","maxWidth","gridTemplateColumns","gridTemplateRows","touchAction","overscrollBehaviorY","gridColumnStart","gridRowStart","gridColumnEnd","gridRowEnd","pointerEvents","_","onMouseDown","onTouchStart","bottom","slice","marginLeft","marginTop","panel","padding","_c2","$RefreshReg$"],"sources":["/data/data/com.termux/files/home/dndkittest/src/Grid.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport {\n  DndContext,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  DragOverlay,\n  pointerWithin,\n  useDndContext\n} from \"@dnd-kit/core\";\n\nimport Panel from \"./Panel\";\nimport PanelClone from \"./PanelClone\";\n\nimport { useDroppable } from \"@dnd-kit/core\";\n\nfunction CellDroppable({ r, c, dark }) {\n  const { active } = useDndContext();\n\n  const isPanelDrag = active?.data?.current?.role === \"panel\";\n\n  const { setNodeRef, isOver } = useDroppable({\n    id: `cell-${r}-${c}`,\n    data: { role: \"grid-cell\", row: r, col: c }\n  });\n  useEffect(() => {\n    if (isOver) console.log(\"ðŸ”¥ OVER CELL:\", r, c);\n  }, [isOver]);\n  const highlight = isPanelDrag && isOver;\n\n  return (\n    <div\n      ref={setNodeRef}\n      style={{\n        background: highlight\n          ? \"rgba(50,150,255,0.45)\"\n          : dark\n            ? \"#22272B\"\n            : \"#2C333A\",\n        border: \"1px solid #3F444A\",\n        transition: \"background 80ms\"\n      }}\n    />\n  );\n}\n\nexport default function Grid({\n  rows,\n  cols,\n  panels,\n  setPanels,\n  tasks,\n  setTasks,\n  toggleToolbar\n}) {\n  const gridRef = useRef(null);\n  const [activeId, setActiveId] = useState(null);\n\n  const [colSizes, setColSizes] = useState(() => Array(cols).fill(1));\n  const [rowSizes, setRowSizes] = useState(() => Array(rows).fill(1));\n\n  useEffect(() => setColSizes(Array(cols).fill(1)), [cols]);\n  useEffect(() => setRowSizes(Array(rows).fill(1)), [rows]);\n\n  // expose FR track sizes to panels\n  useEffect(() => {\n    if (gridRef.current) {\n      gridRef.current.dataset.sizes = JSON.stringify({\n        colSizes,\n        rowSizes\n      });\n    }\n  }, [colSizes, rowSizes]);\n\n  const colTemplate = colSizes.map((s) => `${s}fr`).join(\" \");\n  const rowTemplate = rowSizes.map((s) => `${s}fr`).join(\" \");\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, { activationConstraint: { distance: 4 } })\n  );\n\n  const getPanel = (id) => panels.find((p) => p.id === id);\n\n  // pointer â†’ grid cell\n  const getCellFromPointer = (clientX, clientY) => {\n    const rect = gridRef.current.getBoundingClientRect();\n    const relX = (clientX - rect.left) / rect.width;\n    const relY = (clientY - rect.top) / rect.height;\n\n    const totalCols = colSizes.reduce((a, b) => a + b, 0);\n    let acc = 0;\n    let col = 0;\n    for (let i = 0; i < colSizes.length; i++) {\n      acc += colSizes[i];\n      if (relX < acc / totalCols) {\n        col = i;\n        break;\n      }\n    }\n\n    const totalRows = rowSizes.reduce((a, b) => a + b, 0);\n    acc = 0;\n    let row = 0;\n    for (let i = 0; i < rowSizes.length; i++) {\n      acc += rowSizes[i];\n      if (relY < acc / totalRows) {\n        row = i;\n        break;\n      }\n    }\n\n    return { col, row };\n  };\n\n  // âœ… cursor tracking: always pointerStart + delta\n  const getPointerXY = (event) => {\n    const data = event.active.data.current;\n    if (!data || !data.pointerStart) return null;\n\n    return {\n      x: data.pointerStart.x + event.delta.x,\n      y: data.pointerStart.y + event.delta.y\n    };\n  };\n\n\n  const [hoverCell, setHoverCell] = useState(null);\n\n  // ----------------------------------------------------------\n  // DRAG START\n  // ----------------------------------------------------------\n  const handleDragStart = (event) => {\n    setActiveId(event.active.id);\n\n    const e = event.activatorEvent;\n    const clientX = e?.clientX ?? e?.touches?.[0]?.clientX;\n    const clientY = e?.clientY ?? e?.touches?.[0]?.clientY;\n\n    // Make sure data.current exists:\n    if (!event.active.data.current) {\n      event.active.data.current = { ...event.active.data };\n    }\n\n    // DO NOT SPREAD event.active.data.current (it resets keys)\n    event.active.data.current.pointerStart = {\n      x: clientX,\n      y: clientY\n    };\n\n    console.log(\"dragStart data:\", event.active.data.current);\n  };\n\n\n  // ----------------------------------------------------------\n  // DRAG MOVE (panel-only highlight, based on mouse position)\n  // ----------------------------------------------------------\n  const handleDragMove = (event) => {\n    console.log(event);\n    const data = event.active.data.current;\n\n    console.log(\"DRAGGED:\", data);\n    console.log(\"OVER:\", event.over);\n\n\n    // If it's not a panel, don't show a hover cell\n    if (data?.type !== \"panel\") {\n      setHoverCell(null);\n      return;\n    }\n\n    const pointer = getPointerXY(event);\n    if (!pointer) return;\n\n    const { col, row } = getCellFromPointer(pointer.x, pointer.y);\n    setHoverCell({ col, row });\n  };\n\n  // ----------------------------------------------------------\n  // DRAG END\n  // ----------------------------------------------------------\n  const handleDragEnd = (event) => {\n    setActiveId(null);\n    setHoverCell(null);\n\n    const active = event.active;\n    const over = event.over;\n    console.log(over);\n    if (!over) return;\n    console.log(event);\n    const data = active.data.current;\n    const isTask = data?.role === \"task\";\n\n    // -----------------------------\n    // TASK DRAG â€” TWO WAY FLOW\n    // -----------------------------\n    if (isTask) {\n      const activeId = active.id;\n      const fromPanelId = data.fromPanelId;\n      const toPanelId = over.id;\n\n      if (!toPanelId || !fromPanelId || over.data.current.role == \"grid-cell\") return;\n\n      setPanels((list) =>\n        list.map((p) => {\n          if (p.id === fromPanelId) {\n            return {\n              ...p,\n              tasks: p.tasks.filter((t) => t !== activeId)\n            };\n          }\n          if (p.id === toPanelId) {\n            return {\n              ...p,\n              tasks: [...p.tasks, activeId]\n            };\n          }\n          return p;\n        })\n      );\n\n      return;\n    }\n    console.log(data);\n    if (data?.role === \"panel\") {\n      console.log(\"Hit\");\n      const pointer = getPointerXY(event);\n      console.log(pointer);\n      if (!pointer) return;\n\n      const { col, row } = getCellFromPointer(pointer.x, pointer.y);\n      console.log(\"ðŸ“Œ PANEL DROP TARGET:\", { row, col });\n\n      setPanels((list) =>\n        list.map((p) =>\n          p.id === active.id\n            ? { ...p, col, row, width: 1, height: 1 }\n            : p\n        )\n      );\n\n      return;\n    }\n\n\n  };\n\n  // resizing\n  const resizeColumn = (i, movement) => {\n    setColSizes((sizes) => {\n      const next = i + 1;\n      if (next >= sizes.length) return sizes;\n\n      const copy = [...sizes];\n      copy[i] += movement / 300;\n      copy[next] -= movement / 300;\n\n      copy[i] = Math.max(0.3, copy[i]);\n      copy[next] = Math.max(0.3, copy[next]);\n\n      return copy;\n    });\n  };\n\n  const resizeRow = (i, movement) => {\n    setRowSizes((sizes) => {\n      const next = i + 1;\n      if (next >= sizes.length) return sizes;\n\n      const copy = [...sizes];\n      copy[i] += movement / 300;\n      copy[next] -= movement / 300;\n\n      copy[i] = Math.max(0.3, copy[i]);\n      copy[next] = Math.max(0.3, copy[next]);\n\n      return copy;\n    });\n  };\n\n  // -------------------------------\n  // TOUCH + MOUSE RESIZE HELPERS\n  // -------------------------------\n\n  const getClientX = (e) => (e.touches ? e.touches[0].clientX : e.clientX);\n  const getClientY = (e) => (e.touches ? e.touches[0].clientY : e.clientY);\n\n  // ----- START COLUMN RESIZE -----\n  const startColResize = (e, i) => {\n    e.preventDefault();\n\n    let startX = getClientX(e);\n\n    const move = (ev) => {\n      const delta = getClientX(ev) - startX;\n      startX = getClientX(ev);\n      resizeColumn(i, delta);\n    };\n\n    const stop = () => {\n      window.removeEventListener(\"mousemove\", move);\n      window.removeEventListener(\"mouseup\", stop);\n      window.removeEventListener(\"touchmove\", move);\n      window.removeEventListener(\"touchend\", stop);\n    };\n\n    window.addEventListener(\"mousemove\", move);\n    window.addEventListener(\"mouseup\", stop);\n    window.addEventListener(\"touchmove\", move);\n    window.addEventListener(\"touchend\", stop);\n  };\n\n  // ----- START ROW RESIZE -----\n  const startRowResize = (e, i) => {\n    e.preventDefault();\n\n    let startY = getClientY(e);\n\n    const move = (ev) => {\n      const delta = getClientY(ev) - startY;\n      startY = getClientY(ev);\n      resizeRow(i, delta);\n    };\n\n    const stop = () => {\n      window.removeEventListener(\"mousemove\", move);\n      window.removeEventListener(\"mouseup\", stop);\n      window.removeEventListener(\"touchmove\", move);\n      window.removeEventListener(\"touchend\", stop);\n    };\n\n    window.addEventListener(\"mousemove\", move);\n    window.addEventListener(\"mouseup\", stop);\n    window.addEventListener(\"touchmove\", move);\n    window.addEventListener(\"touchend\", stop);\n  };\n\n\n  // ----------------------------------------------------------\n  // RENDER\n  // ----------------------------------------------------------\n  return (\n    <DndContext\n      sensors={sensors}\n      collisionDetection={pointerWithin}\n      onDragStart={handleDragStart}\n      onDragMove={handleDragMove}\n      onDragEnd={handleDragEnd}\n    >\n      <div\n        style={{\n          position: \"absolute\",\n          inset: 0,\n          background: \"#1D2125\",\n          overflow: \"hidden\"\n        }}\n      >\n        <div\n          onClick={toggleToolbar}\n          style={{\n            position: \"absolute\",\n            top: 10,\n            right: 10,\n            width: 42,\n            height: 42,\n            background: \"#2C313A\",\n            border: \"1px solid #444\",\n            borderRadius: 8,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            color: \"white\",\n            cursor: \"pointer\",\n            zIndex: 2\n          }}\n        >\n          ðŸ”§\n        </div>\n\n        <div\n          ref={gridRef}\n          style={{\n            position: \"absolute\",\n            inset: 0,\n\n            /* ADD THESE */\n            width: \"100%\",\n            maxWidth: \"100%\",\n            overflow: \"hidden\",\n            height: \"93vh\",\n            display: \"grid\",\n            gridTemplateColumns: colTemplate,\n            gridTemplateRows: rowTemplate,\n            touchAction: \"none\",            // â† blocks pull-to-refresh\n            overscrollBehaviorY: \"none\",    // â† prevents bounce refresh\n          }}\n        >\n          {hoverCell && (\n            <div\n              style={{\n                gridColumnStart: hoverCell.col + 1,\n                gridRowStart: hoverCell.row + 1,\n                gridColumnEnd: hoverCell.col + 2,\n                gridRowEnd: hoverCell.row + 2,\n                background: \"rgba(50,150,255,0.45)\",\n                pointerEvents: \"none\",\n                zIndex: 5\n              }}\n            />\n          )}\n\n          {/* checkerboard droppable cells */}\n          {[...Array(rows)].map((_, r) =>\n            [...Array(cols)].map((_, c) => {\n              const dark = (r + c) % 2 === 0;\n              return (\n                <CellDroppable\n                  key={`${r}-${c}`}\n                  r={r}\n                  c={c}\n                  dark={dark}\n                />\n              );\n            })\n          )}\n\n          {/* Column handles */}\n          {colSizes.map((_, i) =>\n            i < colSizes.length - 1 ? (\n              <div\n                key={`col-handle-${i}`}\n                onMouseDown={(e) => startColResize(e, i)}\n                onTouchStart={(e) => startColResize(e, i)}\n                style={{\n                  position: \"absolute\",\n                  top: 0,\n                  bottom: 0,\n                  left: `calc(${(100 *\n                    colSizes.slice(0, i + 1).reduce((a, b) => a + b, 0)) /\n                    colSizes.reduce((a, b) => a + b, 0)}%)`,\n                  width: 6,\n                  marginLeft: -3,\n                  cursor: \"col-resize\",\n                  background: \"rgba(255,255,255,0.15)\",\n                  zIndex: 50,\n                  touchAction: \"none\", // prevents view scrolling during resize\n                }}\n              />\n            ) : null\n          )}\n\n          {/* Row handles */}\n          {rowSizes.map((_, i) =>\n            i < rowSizes.length - 1 ? (\n              <div\n                key={`row-handle-${i}`}\n                onMouseDown={(e) => startRowResize(e, i)}\n                onTouchStart={(e) => startRowResize(e, i)}\n                style={{\n                  position: \"absolute\",\n                  left: 0,\n                  right: 0,\n                  top: `calc(${(100 *\n                    rowSizes.slice(0, i + 1).reduce((a, b) => a + b, 0)) /\n                    rowSizes.reduce((a, b) => a + b, 0)}%)`,\n                  height: 6,\n                  marginTop: -3,\n                  cursor: \"row-resize\",\n                  background: \"rgba(255,255,255,0.15)\",\n                  zIndex: 50,\n                  touchAction: \"none\",\n                }}\n              />\n            ) : null\n          )}\n\n          {panels.map((p) => (\n            <Panel\n              key={p.id}\n              panel={p}\n              setPanels={setPanels}\n              tasks={tasks}\n              setTasks={setTasks}\n              gridRef={gridRef}\n              cols={cols}\n              rows={rows}\n              activeId={activeId}\n            />\n          ))}\n\n\n        </div>\n      </div>\n\n      <DragOverlay zIndex={100000}>\n        {activeId && getPanel(activeId) ? (\n          <PanelClone panel={getPanel(activeId)} />\n        ) : null}\n\n        {activeId && !getPanel(activeId) ? (\n          <div\n            style={{\n              padding: 8,\n              background: \"#334\",\n              color: \"white\",\n              borderRadius: 6\n            }}\n          >\n            {activeId}\n          </div>\n        ) : null}\n      </DragOverlay>\n    </DndContext>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}