{"ast":null,"code":"var _jsxFileName = \"/data/data/com.termux/files/home/dndkittest/src/SortableItem.jsx\",\n  _s = $RefreshSig$();\n// SortableItem.jsx â€” WORKING VERSION WITH POPUP + TRIGGER PROPS\nimport React, { useContext, useRef, useState } from \"react\";\nimport { useSortable } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { ScheduleContext } from \"./ScheduleContext\";\nimport Popup from \"@atlaskit/popup\";\nimport Textfield from \"@atlaskit/textfield\";\nimport EditIcon from \"@atlaskit/icon/glyph/edit\";\nimport TrashIcon from \"@atlaskit/icon/glyph/trash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SortableItem({\n  instanceId,\n  containerId\n}) {\n  _s();\n  var _inst$label;\n  const {\n    instanceStoreRef,\n    editItem,\n    deleteItem,\n    anyDragging\n  } = useContext(ScheduleContext);\n  const inst = instanceStoreRef.current[instanceId] || {};\n  const label = (_inst$label = inst.label) !== null && _inst$label !== void 0 ? _inst$label : \"Untitled\";\n  const [isOpen, setIsOpen] = useState(false);\n  const [draft, setDraft] = useState(label);\n  const anchorRef = useRef(null); // ðŸ”¥ stable anchor\n\n  const {\n    setNodeRef,\n    attributes,\n    listeners,\n    transform,\n    transition,\n    isDragging\n  } = useSortable({\n    id: instanceId,\n    data: {\n      type: \"task\",\n      instanceId,\n      containerId\n    }\n  });\n  React.useEffect(() => {\n    if (anyDragging && isOpen) {\n      setIsOpen(false);\n    }\n  }, [anyDragging]);\n  const save = () => {\n    editItem(instanceId, draft.trim() || \"Untitled\");\n    setIsOpen(false);\n  };\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n    background: \"#2F343A\",\n    border: \"1px solid #444\",\n    borderRadius: 6,\n    padding: \"6px 10px\",\n    marginBottom: 4,\n    color: \"white\",\n    cursor: \"grab\",\n    fontSize: 14,\n    touchAction: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"start\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setNodeRef,\n    ...attributes,\n    ...listeners,\n    style: style,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: anchorRef,\n      style: {\n        display: \"flex\",\n        borderRadius: 6\n      },\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        isOpen: isOpen,\n        onClose: () => setIsOpen(false),\n        placement: \"right-start\",\n        shouldCloseOnBlur: false,\n        referenceElement: anchorRef.current,\n        content: () => /*#__PURE__*/_jsxDEV(\"div\", {\n          \"data-dndkit-disable-drag\": true,\n          onPointerDown: e => e.stopPropagation(),\n          className: \"input\",\n          style: {\n            background: \"#1D2125\",\n            padding: 10,\n            borderRadius: 4,\n            border: \"1px solid #555\",\n            width: 200,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            gap: 6\n          },\n          children: [/*#__PURE__*/_jsxDEV(Textfield, {\n            appearance: \"standard\",\n            autoFocus: true,\n            value: draft,\n            onChange: e => setDraft(e.target.value),\n            onKeyDown: e => {\n              if (e.key === \"Enter\") save();\n              e.stopPropagation();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deleteItem(instanceId),\n            style: {\n              background: \"#C9372C\",\n              border: \"none\",\n              width: 40,\n              height: 40,\n              borderRadius: 4,\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              cursor: \"pointer\"\n            },\n            children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n              size: \"small\",\n              primaryColor: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this),\n        trigger: triggerProps => /*#__PURE__*/_jsxDEV(\"button\", {\n          ...triggerProps,\n          \"data-dndkit-disable-drag\": true,\n          onClick: e => {\n            e.stopPropagation();\n            setDraft(label);\n            setIsOpen(!isOpen);\n          },\n          onPointerDown: e => e.stopPropagation(),\n          style: {\n            background: \"none\",\n            border: \"none\",\n            cursor: \"pointer\",\n            color: \"white\",\n            padding: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(EditIcon, {\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: 10\n      },\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(SortableItem, \"mXdD/W6txsWkx3/Kdqa+c3Bqqps=\", false, function () {\n  return [useSortable];\n});\n_c = SortableItem;\nvar _c;\n$RefreshReg$(_c, \"SortableItem\");","map":{"version":3,"names":["React","useContext","useRef","useState","useSortable","CSS","ScheduleContext","Popup","Textfield","EditIcon","TrashIcon","jsxDEV","_jsxDEV","SortableItem","instanceId","containerId","_s","_inst$label","instanceStoreRef","editItem","deleteItem","anyDragging","inst","current","label","isOpen","setIsOpen","draft","setDraft","anchorRef","setNodeRef","attributes","listeners","transform","transition","isDragging","id","data","type","useEffect","save","trim","style","Transform","toString","opacity","background","border","borderRadius","padding","marginBottom","color","cursor","fontSize","touchAction","display","alignItems","justifyContent","ref","children","onClose","placement","shouldCloseOnBlur","referenceElement","content","onPointerDown","e","stopPropagation","className","width","gap","appearance","autoFocus","value","onChange","target","onKeyDown","key","fileName","_jsxFileName","lineNumber","columnNumber","onClick","height","size","primaryColor","trigger","triggerProps","marginLeft","_c","$RefreshReg$"],"sources":["/data/data/com.termux/files/home/dndkittest/src/SortableItem.jsx"],"sourcesContent":["// SortableItem.jsx â€” WORKING VERSION WITH POPUP + TRIGGER PROPS\nimport React, { useContext, useRef, useState } from \"react\";\nimport { useSortable } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { ScheduleContext } from \"./ScheduleContext\";\nimport Popup from \"@atlaskit/popup\";\nimport Textfield from \"@atlaskit/textfield\";\nimport EditIcon from \"@atlaskit/icon/glyph/edit\";\nimport TrashIcon from \"@atlaskit/icon/glyph/trash\";\n\nexport default function SortableItem({ instanceId, containerId }) {\n    const { instanceStoreRef, editItem, deleteItem, anyDragging } = useContext(ScheduleContext);\n\n    const inst = instanceStoreRef.current[instanceId] || {};\n    const label = inst.label ?? \"Untitled\";\n\n    const [isOpen, setIsOpen] = useState(false);\n    const [draft, setDraft] = useState(label);\n\n    const anchorRef = useRef(null); // ðŸ”¥ stable anchor\n\n    const {\n        setNodeRef,\n        attributes,\n        listeners,\n        transform,\n        transition,\n        isDragging\n    } = useSortable({\n        id: instanceId,\n        data: { type: \"task\", instanceId, containerId }\n    });\n        React.useEffect(() => {\n            if (anyDragging && isOpen) {\n                setIsOpen(false);\n            }\n        }, [anyDragging]);\n    const save = () => {\n        editItem(instanceId, draft.trim() || \"Untitled\");\n        setIsOpen(false);\n    };\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition,\n        opacity: isDragging ? 0.5 : 1,\n        background: \"#2F343A\",\n        border: \"1px solid #444\",\n        borderRadius: 6,\n        padding: \"6px 10px\",\n        marginBottom: 4,\n        color: \"white\",\n        cursor: \"grab\",\n        fontSize: 14,\n        touchAction: \"none\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"start\",\n    };\n\n\n    return (\n        <div\n            ref={setNodeRef}\n            {...attributes}\n            {...listeners}\n            style={style}\n        >\n            {/* ðŸ”¥ Stable non-draggable wrapper for popup trigger */}\n            <div\n                ref={anchorRef}\n               \n\n                style={{ display: \"flex\", borderRadius: 6 }}\n            >\n                <Popup\n                    isOpen={isOpen}\n                    onClose={() => setIsOpen(false)}\n                    placement=\"right-start\"\n                    shouldCloseOnBlur={false}\n                    referenceElement={anchorRef.current}\n                    content={() => (\n                        <div\n                            data-dndkit-disable-drag\n                            onPointerDown={(e) => e.stopPropagation()}\n                            className=\"input\"\n                            style={{\n                                background: \"#1D2125\",\n                                padding: 10,\n                                borderRadius: 4,\n                                border: \"1px solid #555\",\n                                width: 200,\n                                display: \"flex\",\n                                alignItems: \"center\",\n                                justifyContent: \"space-between\",\n                                gap: 6\n                            }}\n                        >\n                            <Textfield\n                                appearance=\"standard\"\n                                autoFocus\n                                value={draft}\n                                onChange={(e) => setDraft(e.target.value)}\n                                onKeyDown={(e) => {\n                                    if (e.key === \"Enter\") save();\n                                    e.stopPropagation();\n                                }}\n                            />\n                            <button\n                                onClick={() => deleteItem(instanceId)}\n                                style={{\n                                    background: \"#C9372C\",\n                                    border: \"none\",\n                                    width: 40,\n                                    height: 40,\n                                    borderRadius: 4,\n                                    display: \"flex\",\n                                    alignItems: \"center\",\n                                    justifyContent: \"center\",\n                                    cursor: \"pointer\"\n                                }}\n                            >\n                                <TrashIcon size=\"small\" primaryColor=\"white\" />\n                            </button>\n\n\n                        </div>\n                    )}\n                    trigger={(triggerProps) => (\n                        <button\n                            {...triggerProps}\n                            data-dndkit-disable-drag\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                setDraft(label);\n                                setIsOpen(!isOpen);\n                            }}\n                            onPointerDown={(e) => e.stopPropagation()}\n                            style={{\n                                background: \"none\",\n                                border: \"none\",\n                                cursor: \"pointer\",\n                                color: \"white\",\n                                padding: 4\n                            }}\n                        >\n                            <EditIcon size=\"small\" />\n                        </button>\n                    )}\n                />\n            </div>\n            <div style={{ marginLeft: 10 }}>{label}</div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}