{"ast":null,"code":"var _jsxFileName = \"/data/data/com.termux/files/home/dndkittest/src/TaskBox.js\",\n  _s = $RefreshSig$();\n// TaskBox.jsx — now includes “Add Task” button + droppable fix\n\nimport React, { useContext } from \"react\";\nimport { SortableContext, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport { useDroppable } from \"@dnd-kit/core\"; // ✅ ADD THIS\nimport { ScheduleContext } from \"./ScheduleContext\";\nimport SortableItem from \"./SortableItem\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TaskBox({\n  panelId,\n  containerId,\n  disabled\n}) {\n  _s();\n  const {\n    containerState,\n    setContainerState,\n    instanceStoreRef\n  } = useContext(ScheduleContext);\n  const instanceIds = containerState[containerId] || [];\n\n  // ----------------------------------------------------\n  // MAKE TASKBOX DROPPABLE (fix for empty drop issue)\n  // ----------------------------------------------------\n  const {\n    setNodeRef\n  } = useDroppable({\n    id: containerId,\n    data: {\n      role: \"task-container\",\n      containerId\n    },\n    disabled\n  });\n\n  // ----------------------------------------------------\n  // ADD NEW TASK TO THIS TASKBOX\n  // ----------------------------------------------------\n  const handleAddTask = () => {\n    const taskId = crypto.randomUUID();\n    const instId = crypto.randomUUID();\n\n    // 1️⃣ store instance info\n    instanceStoreRef.current[instId] = {\n      taskId,\n      instanceId: instId,\n      label: `New Task`\n    };\n\n    // 2️⃣ append to this TaskBox container\n    setContainerState(prev => ({\n      ...prev,\n      [containerId]: [...(prev[containerId] || []), instId]\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setNodeRef // ✅ THIS MAKES IT DROPPABLE\n    ,\n    className: \"taskbox\",\n    \"data-role\": \"taskbox\",\n    \"data-containerid\": containerId,\n    style: {\n      width: \"100%\",\n      height: \"100%\",\n      overflowY: \"auto\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(SortableContext, {\n      id: containerId,\n      items: instanceIds,\n      strategy: verticalListSortingStrategy,\n      disabled: disabled,\n      data: {\n        role: \"task-container\",\n        containerId\n      },\n      children: instanceIds.map(instId => {\n        const inst = instanceStoreRef.current[instId];\n        if (!inst) return null;\n        return /*#__PURE__*/_jsxDEV(SortableItem, {\n          instanceId: instId,\n          containerId: containerId\n        }, instId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddTask,\n      style: {\n        marginTop: \"auto\",\n        padding: \"6px 10px\",\n        background: \"#3A3F45\",\n        color: \"white\",\n        border: \"1px solid #555\",\n        borderRadius: 6,\n        cursor: \"pointer\"\n      },\n      children: \"+ Add Task\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(TaskBox, \"F/KNx0FptTk/IsRFyHx9CmX+FqI=\", false, function () {\n  return [useDroppable];\n});\n_c = TaskBox;\nvar _c;\n$RefreshReg$(_c, \"TaskBox\");","map":{"version":3,"names":["React","useContext","SortableContext","verticalListSortingStrategy","useDroppable","ScheduleContext","SortableItem","jsxDEV","_jsxDEV","TaskBox","panelId","containerId","disabled","_s","containerState","setContainerState","instanceStoreRef","instanceIds","setNodeRef","id","data","role","handleAddTask","taskId","crypto","randomUUID","instId","current","instanceId","label","prev","ref","className","style","width","height","overflowY","display","flexDirection","children","items","strategy","map","inst","fileName","_jsxFileName","lineNumber","columnNumber","onClick","marginTop","padding","background","color","border","borderRadius","cursor","_c","$RefreshReg$"],"sources":["/data/data/com.termux/files/home/dndkittest/src/TaskBox.js"],"sourcesContent":["// TaskBox.jsx — now includes “Add Task” button + droppable fix\n\nimport React, { useContext } from \"react\";\nimport { SortableContext, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport { useDroppable } from \"@dnd-kit/core\";         // ✅ ADD THIS\nimport { ScheduleContext } from \"./ScheduleContext\";\nimport SortableItem from \"./SortableItem\";\n\nexport default function TaskBox({ panelId, containerId, disabled }) {\n  const { containerState, setContainerState, instanceStoreRef } =\n    useContext(ScheduleContext);\n\n  const instanceIds = containerState[containerId] || [];\n\n  // ----------------------------------------------------\n  // MAKE TASKBOX DROPPABLE (fix for empty drop issue)\n  // ----------------------------------------------------\n  const { setNodeRef } = useDroppable({\n    id: containerId,\n    data: {\n      role: \"task-container\",\n      containerId\n    },\n    disabled\n  });\n\n  // ----------------------------------------------------\n  // ADD NEW TASK TO THIS TASKBOX\n  // ----------------------------------------------------\n  const handleAddTask = () => {\n    const taskId = crypto.randomUUID();\n    const instId = crypto.randomUUID();\n\n    // 1️⃣ store instance info\n    instanceStoreRef.current[instId] = {\n      taskId,\n      instanceId: instId,\n      label: `New Task`\n    };\n\n    // 2️⃣ append to this TaskBox container\n    setContainerState(prev => ({\n      ...prev,\n      [containerId]: [...(prev[containerId] || []), instId]\n    }));\n  };\n\n  return (\n    <div\n      ref={setNodeRef}                           // ✅ THIS MAKES IT DROPPABLE\n      className=\"taskbox\"\n      data-role=\"taskbox\"\n      data-containerid={containerId}\n      style={{\n        width: \"100%\",\n        height: \"100%\",\n        overflowY: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n      }}\n    >\n      {/* SORTABLE ITEMS */}\n      <SortableContext\n        id={containerId}\n        items={instanceIds}\n        strategy={verticalListSortingStrategy}\n        disabled={disabled}\n        data={{\n          role: \"task-container\",\n          containerId\n        }}\n      >\n        {instanceIds.map(instId => {\n          const inst = instanceStoreRef.current[instId];\n          if (!inst) return null;\n\n          return (\n            <SortableItem\n              key={instId}\n              instanceId={instId}\n              containerId={containerId}\n            />\n          );\n        })}\n      </SortableContext>\n\n      {/* ADD TASK BUTTON */}\n      <button\n        onClick={handleAddTask}\n        style={{\n          marginTop: \"auto\",\n          padding: \"6px 10px\",\n          background: \"#3A3F45\",\n          color: \"white\",\n          border: \"1px solid #555\",\n          borderRadius: 6,\n          cursor: \"pointer\"\n        }}\n      >\n        + Add Task\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}