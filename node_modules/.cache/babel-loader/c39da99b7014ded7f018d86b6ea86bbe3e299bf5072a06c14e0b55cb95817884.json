{"ast":null,"code":"// eslint-disable-next-line no-duplicate-imports\nimport { useEffect, useRef } from 'react';\nimport { bind, bindAll } from 'bind-event-listener';\nimport noop from '@atlaskit/ds-lib/noop';\nimport { useLayering } from '@atlaskit/layering';\nimport { fg } from '@atlaskit/platform-feature-flags';\nimport { isInteractiveElement } from './utils/is-element-interactive';\nimport { useAnimationFrame } from './utils/use-animation-frame';\nexport var useCloseManager = function useCloseManager(_ref) {\n  var isOpen = _ref.isOpen,\n    onClose = _ref.onClose,\n    popupRef = _ref.popupRef,\n    triggerRef = _ref.triggerRef,\n    autoFocus = _ref.autoFocus,\n    shouldDisableFocusTrap = _ref.shouldDisableFocusTrap,\n    capture = _ref.shouldUseCaptureOnOutsideClick,\n    shouldCloseOnTab = _ref.shouldCloseOnTab,\n    shouldRenderToParent = _ref.shouldRenderToParent;\n  var _useLayering = useLayering(),\n    isLayerDisabled = _useLayering.isLayerDisabled,\n    currentLevel = _useLayering.currentLevel;\n  var _useAnimationFrame = useAnimationFrame(),\n    requestFrame = _useAnimationFrame.requestFrame,\n    cancelAllFrames = _useAnimationFrame.cancelAllFrames;\n  var mouseDownTarget = useRef(null);\n  useEffect(function () {\n    if (!isOpen || !popupRef) {\n      return noop;\n    }\n    var inIframe = window && window.self !== window.top && fg('fix-dropdown-close-outside-iframe');\n    var closePopup = function closePopup(event) {\n      if (onClose) {\n        var _currentLevel = null;\n        if (event.target instanceof HTMLElement) {\n          var _event$target$closest, _event$target$closest2;\n          _currentLevel = (_event$target$closest = (_event$target$closest2 = event.target.closest(\"[data-ds--level]\")) === null || _event$target$closest2 === void 0 ? void 0 : _event$target$closest2.getAttribute('data-ds--level')) !== null && _event$target$closest !== void 0 ? _event$target$closest : null;\n        }\n        _currentLevel ? onClose(event, Number(_currentLevel)) : onClose(event);\n      }\n      if (shouldDisableFocusTrap && fg('platform_dst_popup-disable-focuslock')) {\n        // Restoring the normal focus order for trigger.\n        requestFrame(function () {\n          triggerRef === null || triggerRef === void 0 || triggerRef.setAttribute('tabindex', '0');\n          if (popupRef && autoFocus) {\n            popupRef.setAttribute('tabindex', '0');\n          }\n        });\n      }\n    };\n\n    // This check is required for cases where components like\n    // Select or DDM are placed inside a Popup. A click\n    // on a MenuItem or Option would close the Popup, without registering\n    // a click on DDM/Select.\n    // Users would have to call `onClose` manually to close the Popup in these cases.\n    // You can see the bug in action here:\n    // https://codesandbox.io/s/atlaskitpopup-default-forked-2eb87?file=/example.tsx:0-1788\n    var onClick = function onClick(event) {\n      var target = event.target;\n      var doesDomNodeExist = document.body.contains(target);\n      if (!doesDomNodeExist && !inIframe) {\n        return;\n      }\n      if (isLayerDisabled()) {\n        if (target instanceof HTMLElement) {\n          var _target$closest;\n          var layeredElement = (_target$closest = target.closest) === null || _target$closest === void 0 ? void 0 : _target$closest.call(target, \"[data-ds--level]\");\n          if (layeredElement) {\n            var closeType = layeredElement.getAttribute('[data-ds--close--type]');\n            if (closeType === 'single') {\n              // if the close type is single, we won't close other disabled layers when clicking outside\n              return;\n            }\n            var levelOfClickedLayer = layeredElement.getAttribute('data-ds--level');\n            if (levelOfClickedLayer && Number(levelOfClickedLayer) > currentLevel) {\n              // won't trigger onClick event when we click in a higher layer.\n              return;\n            }\n          }\n        }\n      }\n      var isClickOnPopup = popupRef && popupRef.contains(target);\n      var isClickOnTrigger = triggerRef && triggerRef.contains(target);\n      var didClickStartInsidePopup = popupRef && mouseDownTarget.current instanceof Node && popupRef.contains(mouseDownTarget.current);\n      if (!isClickOnPopup && !isClickOnTrigger && !didClickStartInsidePopup) {\n        closePopup(event);\n        // If there was an outside click on a non-interactive element, the focus should be on the trigger.\n        if (document.activeElement && !isInteractiveElement(document.activeElement) && fg('platform_dst_popup-disable-focuslock')) {\n          triggerRef === null || triggerRef === void 0 || triggerRef.focus();\n        }\n      }\n    };\n    var onMouseDown = function onMouseDown(event) {\n      /**\n       * Tracking the target of the mouse down event.\n       * This is used to prevent the popup from closing when the user mouses down inside the popup, but then\n       * moves the mouse outside the popup before releasing the mouse button.\n       *\n       * This is a common user interaction - users may have mistakenly clicked on something, or changed their mind,\n       * so they try to cancel their click by moving their mouse away from what they had moused down on.\n       *\n       * Blanket uses the same technique.\n       */\n      mouseDownTarget.current = event.target;\n    };\n    var onKeyDown = function onKeyDown(event) {\n      if (fg('platform_dst_popup-disable-focuslock')) {\n        var key = event.key,\n          shiftKey = event.shiftKey;\n        if (shiftKey && key === 'Tab' && !shouldRenderToParent) {\n          if (isLayerDisabled()) {\n            return;\n          }\n          // We need to move the focus to the popup trigger when the popup is displayed in React.Portal.\n          requestFrame(function () {\n            var isPopupFocusOut = popupRef && !popupRef.contains(document.activeElement);\n            if (isPopupFocusOut) {\n              closePopup(event);\n              if (currentLevel === 1) {\n                triggerRef === null || triggerRef === void 0 || triggerRef.focus();\n              }\n            }\n          });\n          return;\n        }\n        if (key === 'Tab') {\n          var _document$activeEleme;\n          // We have cases where we need to close the Popup on Tab press.\n          // Example: DropdownMenu\n          if (shouldCloseOnTab) {\n            if (isLayerDisabled()) {\n              return;\n            }\n            closePopup(event);\n            return;\n          }\n          if (isLayerDisabled() && (_document$activeEleme = document.activeElement) !== null && _document$activeEleme !== void 0 && _document$activeEleme.closest('[aria-modal]')) {\n            return;\n          }\n          if (shouldDisableFocusTrap) {\n            if (shouldRenderToParent) {\n              // We need to move the focus to the previous interactive element before popup trigger\n              requestFrame(function () {\n                var isPopupFocusOut = popupRef && !popupRef.contains(document.activeElement);\n                if (isPopupFocusOut) {\n                  closePopup(event);\n                }\n              });\n            } else {\n              requestFrame(function () {\n                if (!document.hasFocus()) {\n                  closePopup(event);\n                }\n              });\n            }\n            return;\n          }\n        }\n        if (isLayerDisabled()) {\n          return;\n        }\n        if (key === 'Escape' || key === 'Esc') {\n          if (triggerRef && autoFocus) {\n            triggerRef.focus();\n          }\n          closePopup(event);\n        }\n      } else {\n        if (isLayerDisabled()) {\n          return;\n        }\n        var _key = event.key;\n        if (_key === 'Escape' || _key === 'Esc' || shouldCloseOnTab && _key === 'Tab') {\n          closePopup(event);\n        }\n      }\n    };\n    var parentUnbind;\n    // if the popup is inside iframe, we want to listen to click events outside iframe,\n    // to close the popup correctly in the iframe.\n    if (inIframe && isOpen) {\n      parentUnbind = bind(window.parent.window, {\n        type: 'click',\n        listener: onClick,\n        options: {\n          capture: capture\n        }\n      });\n    }\n    var unbind = noop;\n    if (fg('popup-onclose-fix')) {\n      setTimeout(function () {\n        unbind = bindAll(window, [{\n          type: 'click',\n          listener: onClick,\n          options: {\n            capture: capture\n          }\n        }, {\n          type: 'keydown',\n          listener: onKeyDown\n        }, {\n          type: 'mousedown',\n          listener: onMouseDown\n        }]);\n      }, 0);\n    } else {\n      unbind = bindAll(window, [{\n        type: 'click',\n        listener: onClick,\n        options: {\n          capture: capture\n        }\n      }, {\n        type: 'keydown',\n        listener: onKeyDown\n      }, {\n        type: 'mousedown',\n        listener: onMouseDown\n      }]);\n    }\n\n    // bind onBlur event listener to fix popup not close when clicking on iframe outside\n    var unbindBlur = noop;\n    unbindBlur = bind(window, {\n      type: 'blur',\n      listener: function onBlur(e) {\n        if (isLayerDisabled() || !(document.activeElement instanceof HTMLIFrameElement)) {\n          return;\n        }\n        closePopup(e);\n      }\n    });\n    return function () {\n      var _parentUnbind;\n      if (fg('popup-onclose-fix')) {\n        setTimeout(function () {\n          unbind();\n        }, 0);\n      } else {\n        unbind();\n      }\n      cancelAllFrames();\n      (_parentUnbind = parentUnbind) === null || _parentUnbind === void 0 || _parentUnbind();\n      unbindBlur();\n    };\n  }, [isOpen, onClose, popupRef, triggerRef, autoFocus, shouldDisableFocusTrap, capture, isLayerDisabled, shouldCloseOnTab, currentLevel, shouldRenderToParent, requestFrame, cancelAllFrames]);\n};","map":{"version":3,"names":["useEffect","useRef","bind","bindAll","noop","useLayering","fg","isInteractiveElement","useAnimationFrame","useCloseManager","_ref","isOpen","onClose","popupRef","triggerRef","autoFocus","shouldDisableFocusTrap","capture","shouldUseCaptureOnOutsideClick","shouldCloseOnTab","shouldRenderToParent","_useLayering","isLayerDisabled","currentLevel","_useAnimationFrame","requestFrame","cancelAllFrames","mouseDownTarget","inIframe","window","self","top","closePopup","event","_currentLevel","target","HTMLElement","_event$target$closest","_event$target$closest2","closest","getAttribute","Number","setAttribute","onClick","doesDomNodeExist","document","body","contains","_target$closest","layeredElement","call","closeType","levelOfClickedLayer","isClickOnPopup","isClickOnTrigger","didClickStartInsidePopup","current","Node","activeElement","focus","onMouseDown","onKeyDown","key","shiftKey","isPopupFocusOut","_document$activeEleme","hasFocus","_key","parentUnbind","parent","type","listener","options","unbind","setTimeout","unbindBlur","onBlur","e","HTMLIFrameElement","_parentUnbind"],"sources":["/data/data/com.termux/files/home/dndkittest/node_modules/@atlaskit/popup/dist/esm/use-close-manager.js"],"sourcesContent":["// eslint-disable-next-line no-duplicate-imports\nimport { useEffect, useRef } from 'react';\nimport { bind, bindAll } from 'bind-event-listener';\nimport noop from '@atlaskit/ds-lib/noop';\nimport { useLayering } from '@atlaskit/layering';\nimport { fg } from '@atlaskit/platform-feature-flags';\nimport { isInteractiveElement } from './utils/is-element-interactive';\nimport { useAnimationFrame } from './utils/use-animation-frame';\nexport var useCloseManager = function useCloseManager(_ref) {\n  var isOpen = _ref.isOpen,\n    onClose = _ref.onClose,\n    popupRef = _ref.popupRef,\n    triggerRef = _ref.triggerRef,\n    autoFocus = _ref.autoFocus,\n    shouldDisableFocusTrap = _ref.shouldDisableFocusTrap,\n    capture = _ref.shouldUseCaptureOnOutsideClick,\n    shouldCloseOnTab = _ref.shouldCloseOnTab,\n    shouldRenderToParent = _ref.shouldRenderToParent;\n  var _useLayering = useLayering(),\n    isLayerDisabled = _useLayering.isLayerDisabled,\n    currentLevel = _useLayering.currentLevel;\n  var _useAnimationFrame = useAnimationFrame(),\n    requestFrame = _useAnimationFrame.requestFrame,\n    cancelAllFrames = _useAnimationFrame.cancelAllFrames;\n  var mouseDownTarget = useRef(null);\n  useEffect(function () {\n    if (!isOpen || !popupRef) {\n      return noop;\n    }\n    var inIframe = window && window.self !== window.top && fg('fix-dropdown-close-outside-iframe');\n    var closePopup = function closePopup(event) {\n      if (onClose) {\n        var _currentLevel = null;\n        if (event.target instanceof HTMLElement) {\n          var _event$target$closest, _event$target$closest2;\n          _currentLevel = (_event$target$closest = (_event$target$closest2 = event.target.closest(\"[data-ds--level]\")) === null || _event$target$closest2 === void 0 ? void 0 : _event$target$closest2.getAttribute('data-ds--level')) !== null && _event$target$closest !== void 0 ? _event$target$closest : null;\n        }\n        _currentLevel ? onClose(event, Number(_currentLevel)) : onClose(event);\n      }\n      if (shouldDisableFocusTrap && fg('platform_dst_popup-disable-focuslock')) {\n        // Restoring the normal focus order for trigger.\n        requestFrame(function () {\n          triggerRef === null || triggerRef === void 0 || triggerRef.setAttribute('tabindex', '0');\n          if (popupRef && autoFocus) {\n            popupRef.setAttribute('tabindex', '0');\n          }\n        });\n      }\n    };\n\n    // This check is required for cases where components like\n    // Select or DDM are placed inside a Popup. A click\n    // on a MenuItem or Option would close the Popup, without registering\n    // a click on DDM/Select.\n    // Users would have to call `onClose` manually to close the Popup in these cases.\n    // You can see the bug in action here:\n    // https://codesandbox.io/s/atlaskitpopup-default-forked-2eb87?file=/example.tsx:0-1788\n    var onClick = function onClick(event) {\n      var target = event.target;\n      var doesDomNodeExist = document.body.contains(target);\n      if (!doesDomNodeExist && !inIframe) {\n        return;\n      }\n      if (isLayerDisabled()) {\n        if (target instanceof HTMLElement) {\n          var _target$closest;\n          var layeredElement = (_target$closest = target.closest) === null || _target$closest === void 0 ? void 0 : _target$closest.call(target, \"[data-ds--level]\");\n          if (layeredElement) {\n            var closeType = layeredElement.getAttribute('[data-ds--close--type]');\n            if (closeType === 'single') {\n              // if the close type is single, we won't close other disabled layers when clicking outside\n              return;\n            }\n            var levelOfClickedLayer = layeredElement.getAttribute('data-ds--level');\n            if (levelOfClickedLayer && Number(levelOfClickedLayer) > currentLevel) {\n              // won't trigger onClick event when we click in a higher layer.\n              return;\n            }\n          }\n        }\n      }\n      var isClickOnPopup = popupRef && popupRef.contains(target);\n      var isClickOnTrigger = triggerRef && triggerRef.contains(target);\n      var didClickStartInsidePopup = popupRef && mouseDownTarget.current instanceof Node && popupRef.contains(mouseDownTarget.current);\n      if (!isClickOnPopup && !isClickOnTrigger && !didClickStartInsidePopup) {\n        closePopup(event);\n        // If there was an outside click on a non-interactive element, the focus should be on the trigger.\n        if (document.activeElement && !isInteractiveElement(document.activeElement) && fg('platform_dst_popup-disable-focuslock')) {\n          triggerRef === null || triggerRef === void 0 || triggerRef.focus();\n        }\n      }\n    };\n    var onMouseDown = function onMouseDown(event) {\n      /**\n       * Tracking the target of the mouse down event.\n       * This is used to prevent the popup from closing when the user mouses down inside the popup, but then\n       * moves the mouse outside the popup before releasing the mouse button.\n       *\n       * This is a common user interaction - users may have mistakenly clicked on something, or changed their mind,\n       * so they try to cancel their click by moving their mouse away from what they had moused down on.\n       *\n       * Blanket uses the same technique.\n       */\n      mouseDownTarget.current = event.target;\n    };\n    var onKeyDown = function onKeyDown(event) {\n      if (fg('platform_dst_popup-disable-focuslock')) {\n        var key = event.key,\n          shiftKey = event.shiftKey;\n        if (shiftKey && key === 'Tab' && !shouldRenderToParent) {\n          if (isLayerDisabled()) {\n            return;\n          }\n          // We need to move the focus to the popup trigger when the popup is displayed in React.Portal.\n          requestFrame(function () {\n            var isPopupFocusOut = popupRef && !popupRef.contains(document.activeElement);\n            if (isPopupFocusOut) {\n              closePopup(event);\n              if (currentLevel === 1) {\n                triggerRef === null || triggerRef === void 0 || triggerRef.focus();\n              }\n            }\n          });\n          return;\n        }\n        if (key === 'Tab') {\n          var _document$activeEleme;\n          // We have cases where we need to close the Popup on Tab press.\n          // Example: DropdownMenu\n          if (shouldCloseOnTab) {\n            if (isLayerDisabled()) {\n              return;\n            }\n            closePopup(event);\n            return;\n          }\n          if (isLayerDisabled() && (_document$activeEleme = document.activeElement) !== null && _document$activeEleme !== void 0 && _document$activeEleme.closest('[aria-modal]')) {\n            return;\n          }\n          if (shouldDisableFocusTrap) {\n            if (shouldRenderToParent) {\n              // We need to move the focus to the previous interactive element before popup trigger\n              requestFrame(function () {\n                var isPopupFocusOut = popupRef && !popupRef.contains(document.activeElement);\n                if (isPopupFocusOut) {\n                  closePopup(event);\n                }\n              });\n            } else {\n              requestFrame(function () {\n                if (!document.hasFocus()) {\n                  closePopup(event);\n                }\n              });\n            }\n            return;\n          }\n        }\n        if (isLayerDisabled()) {\n          return;\n        }\n        if (key === 'Escape' || key === 'Esc') {\n          if (triggerRef && autoFocus) {\n            triggerRef.focus();\n          }\n          closePopup(event);\n        }\n      } else {\n        if (isLayerDisabled()) {\n          return;\n        }\n        var _key = event.key;\n        if (_key === 'Escape' || _key === 'Esc' || shouldCloseOnTab && _key === 'Tab') {\n          closePopup(event);\n        }\n      }\n    };\n    var parentUnbind;\n    // if the popup is inside iframe, we want to listen to click events outside iframe,\n    // to close the popup correctly in the iframe.\n    if (inIframe && isOpen) {\n      parentUnbind = bind(window.parent.window, {\n        type: 'click',\n        listener: onClick,\n        options: {\n          capture: capture\n        }\n      });\n    }\n    var unbind = noop;\n    if (fg('popup-onclose-fix')) {\n      setTimeout(function () {\n        unbind = bindAll(window, [{\n          type: 'click',\n          listener: onClick,\n          options: {\n            capture: capture\n          }\n        }, {\n          type: 'keydown',\n          listener: onKeyDown\n        }, {\n          type: 'mousedown',\n          listener: onMouseDown\n        }]);\n      }, 0);\n    } else {\n      unbind = bindAll(window, [{\n        type: 'click',\n        listener: onClick,\n        options: {\n          capture: capture\n        }\n      }, {\n        type: 'keydown',\n        listener: onKeyDown\n      }, {\n        type: 'mousedown',\n        listener: onMouseDown\n      }]);\n    }\n\n    // bind onBlur event listener to fix popup not close when clicking on iframe outside\n    var unbindBlur = noop;\n    unbindBlur = bind(window, {\n      type: 'blur',\n      listener: function onBlur(e) {\n        if (isLayerDisabled() || !(document.activeElement instanceof HTMLIFrameElement)) {\n          return;\n        }\n        closePopup(e);\n      }\n    });\n    return function () {\n      var _parentUnbind;\n      if (fg('popup-onclose-fix')) {\n        setTimeout(function () {\n          unbind();\n        }, 0);\n      } else {\n        unbind();\n      }\n      cancelAllFrames();\n      (_parentUnbind = parentUnbind) === null || _parentUnbind === void 0 || _parentUnbind();\n      unbindBlur();\n    };\n  }, [isOpen, onClose, popupRef, triggerRef, autoFocus, shouldDisableFocusTrap, capture, isLayerDisabled, shouldCloseOnTab, currentLevel, shouldRenderToParent, requestFrame, cancelAllFrames]);\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}