{"ast":null,"code":"import { useCallback, useContext, useEffect, useRef } from 'react';\nimport { bindAll } from 'bind-event-listener';\nimport { LevelContext, LevelNodeContext, RootNodeContext } from '../components/layering-context';\nvar ESCAPE = 'Escape';\n/**\n * Calls back when the escape key is pressed.\n * To be used exclusively for closing layered components.\n * Use the `isDisabled` argument to ignore closing events.\n *\n * ```js\n * useCloseOnEscapePress({\n *   onClose: () => {},\n *   isDisabled: false,\n * });\n * ```\n */\nexport function useCloseOnEscapePress(_ref) {\n  var onClose = _ref.onClose,\n    isDisabled = _ref.isDisabled;\n  var escapePressed = useRef(false);\n  var _useLayering = useLayering(),\n    isLayerDisabled = _useLayering.isLayerDisabled;\n  var onKeyDown = useCallback(function (e) {\n    var isDisabledLayer = isLayerDisabled();\n    if (isDisabled || escapePressed.current || e.key !== ESCAPE || isDisabledLayer) {\n      // We're either already handling the key down event or it's not escape or disabled.\n      // Bail early!\n      return;\n    }\n    escapePressed.current = true;\n    onClose(e);\n  }, [onClose, isDisabled, isLayerDisabled]);\n  var onKeyUp = useCallback(function () {\n    escapePressed.current = false;\n  }, []);\n  useEffect(function () {\n    return bindAll(window, [{\n      type: 'keydown',\n      listener: onKeyDown\n    }, {\n      type: 'keyup',\n      listener: onKeyUp\n    }], {\n      capture: false\n    });\n  }, [onKeyDown, onKeyUp]);\n}\n\n/**\n *\n * Layering hook to get layering info like the current level, the top level of the given component\n *\n */\nexport function useLayering() {\n  var currentLevel = useContext(LevelContext);\n  var layerNode = useContext(LevelNodeContext);\n  var rootNode = useContext(RootNodeContext);\n  var isLayerDisabled = useCallback(function () {\n    // This is an impossible case, added for type safety\n    if (!(layerNode !== null && layerNode !== void 0 && layerNode.current) || !(rootNode !== null && rootNode !== void 0 && rootNode.current)) {\n      return false;\n    }\n    return layerNode.current.getLevel() < rootNode.current.getHeight();\n  }, [layerNode, rootNode]);\n  var getTopLevel = useCallback(function () {\n    return rootNode !== null && rootNode !== void 0 && rootNode.current ? rootNode.current.getHeight() : null;\n  }, [rootNode]);\n  return {\n    currentLevel: currentLevel,\n    isLayerDisabled: isLayerDisabled,\n    getTopLevel: getTopLevel\n  };\n}","map":{"version":3,"names":["useCallback","useContext","useEffect","useRef","bindAll","LevelContext","LevelNodeContext","RootNodeContext","ESCAPE","useCloseOnEscapePress","_ref","onClose","isDisabled","escapePressed","_useLayering","useLayering","isLayerDisabled","onKeyDown","e","isDisabledLayer","current","key","onKeyUp","window","type","listener","capture","currentLevel","layerNode","rootNode","getLevel","getHeight","getTopLevel"],"sources":["/data/data/com.termux/files/home/dndkittest/node_modules/@atlaskit/layering/dist/esm/hooks/index.js"],"sourcesContent":["import { useCallback, useContext, useEffect, useRef } from 'react';\nimport { bindAll } from 'bind-event-listener';\nimport { LevelContext, LevelNodeContext, RootNodeContext } from '../components/layering-context';\nvar ESCAPE = 'Escape';\n/**\n * Calls back when the escape key is pressed.\n * To be used exclusively for closing layered components.\n * Use the `isDisabled` argument to ignore closing events.\n *\n * ```js\n * useCloseOnEscapePress({\n *   onClose: () => {},\n *   isDisabled: false,\n * });\n * ```\n */\nexport function useCloseOnEscapePress(_ref) {\n  var onClose = _ref.onClose,\n    isDisabled = _ref.isDisabled;\n  var escapePressed = useRef(false);\n  var _useLayering = useLayering(),\n    isLayerDisabled = _useLayering.isLayerDisabled;\n  var onKeyDown = useCallback(function (e) {\n    var isDisabledLayer = isLayerDisabled();\n    if (isDisabled || escapePressed.current || e.key !== ESCAPE || isDisabledLayer) {\n      // We're either already handling the key down event or it's not escape or disabled.\n      // Bail early!\n      return;\n    }\n    escapePressed.current = true;\n    onClose(e);\n  }, [onClose, isDisabled, isLayerDisabled]);\n  var onKeyUp = useCallback(function () {\n    escapePressed.current = false;\n  }, []);\n  useEffect(function () {\n    return bindAll(window, [{\n      type: 'keydown',\n      listener: onKeyDown\n    }, {\n      type: 'keyup',\n      listener: onKeyUp\n    }], {\n      capture: false\n    });\n  }, [onKeyDown, onKeyUp]);\n}\n\n/**\n *\n * Layering hook to get layering info like the current level, the top level of the given component\n *\n */\nexport function useLayering() {\n  var currentLevel = useContext(LevelContext);\n  var layerNode = useContext(LevelNodeContext);\n  var rootNode = useContext(RootNodeContext);\n  var isLayerDisabled = useCallback(function () {\n    // This is an impossible case, added for type safety\n    if (!(layerNode !== null && layerNode !== void 0 && layerNode.current) || !(rootNode !== null && rootNode !== void 0 && rootNode.current)) {\n      return false;\n    }\n    return layerNode.current.getLevel() < rootNode.current.getHeight();\n  }, [layerNode, rootNode]);\n  var getTopLevel = useCallback(function () {\n    return rootNode !== null && rootNode !== void 0 && rootNode.current ? rootNode.current.getHeight() : null;\n  }, [rootNode]);\n  return {\n    currentLevel: currentLevel,\n    isLayerDisabled: isLayerDisabled,\n    getTopLevel: getTopLevel\n  };\n}"],"mappings":"AAAA,SAASA,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAClE,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,SAASC,YAAY,EAAEC,gBAAgB,EAAEC,eAAe,QAAQ,gCAAgC;AAChG,IAAIC,MAAM,GAAG,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,qBAAqBA,CAACC,IAAI,EAAE;EAC1C,IAAIC,OAAO,GAAGD,IAAI,CAACC,OAAO;IACxBC,UAAU,GAAGF,IAAI,CAACE,UAAU;EAC9B,IAAIC,aAAa,GAAGV,MAAM,CAAC,KAAK,CAAC;EACjC,IAAIW,YAAY,GAAGC,WAAW,CAAC,CAAC;IAC9BC,eAAe,GAAGF,YAAY,CAACE,eAAe;EAChD,IAAIC,SAAS,GAAGjB,WAAW,CAAC,UAAUkB,CAAC,EAAE;IACvC,IAAIC,eAAe,GAAGH,eAAe,CAAC,CAAC;IACvC,IAAIJ,UAAU,IAAIC,aAAa,CAACO,OAAO,IAAIF,CAAC,CAACG,GAAG,KAAKb,MAAM,IAAIW,eAAe,EAAE;MAC9E;MACA;MACA;IACF;IACAN,aAAa,CAACO,OAAO,GAAG,IAAI;IAC5BT,OAAO,CAACO,CAAC,CAAC;EACZ,CAAC,EAAE,CAACP,OAAO,EAAEC,UAAU,EAAEI,eAAe,CAAC,CAAC;EAC1C,IAAIM,OAAO,GAAGtB,WAAW,CAAC,YAAY;IACpCa,aAAa,CAACO,OAAO,GAAG,KAAK;EAC/B,CAAC,EAAE,EAAE,CAAC;EACNlB,SAAS,CAAC,YAAY;IACpB,OAAOE,OAAO,CAACmB,MAAM,EAAE,CAAC;MACtBC,IAAI,EAAE,SAAS;MACfC,QAAQ,EAAER;IACZ,CAAC,EAAE;MACDO,IAAI,EAAE,OAAO;MACbC,QAAQ,EAAEH;IACZ,CAAC,CAAC,EAAE;MACFI,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC,EAAE,CAACT,SAAS,EAAEK,OAAO,CAAC,CAAC;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASP,WAAWA,CAAA,EAAG;EAC5B,IAAIY,YAAY,GAAG1B,UAAU,CAACI,YAAY,CAAC;EAC3C,IAAIuB,SAAS,GAAG3B,UAAU,CAACK,gBAAgB,CAAC;EAC5C,IAAIuB,QAAQ,GAAG5B,UAAU,CAACM,eAAe,CAAC;EAC1C,IAAIS,eAAe,GAAGhB,WAAW,CAAC,YAAY;IAC5C;IACA,IAAI,EAAE4B,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,IAAIA,SAAS,CAACR,OAAO,CAAC,IAAI,EAAES,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,IAAIA,QAAQ,CAACT,OAAO,CAAC,EAAE;MACzI,OAAO,KAAK;IACd;IACA,OAAOQ,SAAS,CAACR,OAAO,CAACU,QAAQ,CAAC,CAAC,GAAGD,QAAQ,CAACT,OAAO,CAACW,SAAS,CAAC,CAAC;EACpE,CAAC,EAAE,CAACH,SAAS,EAAEC,QAAQ,CAAC,CAAC;EACzB,IAAIG,WAAW,GAAGhC,WAAW,CAAC,YAAY;IACxC,OAAO6B,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,IAAIA,QAAQ,CAACT,OAAO,GAAGS,QAAQ,CAACT,OAAO,CAACW,SAAS,CAAC,CAAC,GAAG,IAAI;EAC3G,CAAC,EAAE,CAACF,QAAQ,CAAC,CAAC;EACd,OAAO;IACLF,YAAY,EAAEA,YAAY;IAC1BX,eAAe,EAAEA,eAAe;IAChCgB,WAAW,EAAEA;EACf,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}